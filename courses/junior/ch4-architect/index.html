<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Age of Architects | Junior Accelerator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/css/lesson-interactive.css">
  <link rel="stylesheet" href="../../shared/css/activity-carousel.css">
</head>
<body data-course="junior" data-lesson="ch4-architect">
  <header class="header">
    <div class="header-content">
      <a href="../../index.html" class="logo">
        <div class="logo-icon">üèõÔ∏è</div>
        <span>Architect</span>
      </a>
      <nav class="nav-links">
        <a href="../index.html">‚Üê Junior</a>
        <a href="../ch3-magnetism/">Ch 3</a>
        <a href="index.html" class="active">Ch 4</a>
        <a href="../ch5-capstone1/">Ch 5: Capstone</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <div class="breadcrumb">
        <a href="../index.html">Junior Accelerator</a>
        <span>/</span>
        <span>The Age of Architects</span>
      </div>
      <h1>üèõÔ∏è The Age of Architects</h1>
      <p>Juniors start coding immediately. Seniors start with a diagram. Learn to think before you type.</p>
    </div>

    <!-- Audio Info -->
    <section class="section audio-info-section">
      <div class="info-box compact">
        <div class="info-header">
          <span class="info-icon">üéôÔ∏è</span>
          <div>
            <h4>Interactive Learning Experience</h4>
            <p>Watch diagrams come alive with AI narration ‚Ä¢ Click dots to jump ‚Ä¢ Test your understanding with quizzes</p>
          </div>
        </div>
        <div class="voice-options">
          <span class="voice-badge">üë©‚Äçüé§ Female Storyteller</span>
          <span class="voice-badge">üé© Male UK Storyteller</span>
        </div>
      </div>
    </section>

    <!-- Story 1: The Coding-First Trap -->
    <section class="section" id="code-trap-section">
      <h2>ü™§ The Coding-First Trap</h2>
      <p>Why jumping straight to code costs you more time in the long run.</p>
      
      <div class="diagram-container" id="code-trap-container">
        <div class="diagram-header">
          <span class="diagram-title">üîÑ Junior vs Senior Approach</span>
        </div>
        <div id="code-trap-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="code-trap-story-caption">
          <div class="story-step">
            <div class="story-icon visible">üöÄ</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">‚Üí</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">‚ñ∂ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="code-trap-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>‚è±Ô∏è</label>
            <select id="code-trap-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="code-trap-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">üîä</span>
            </button>
          </div>
          <div class="control-group">
            <label>üé§</label>
            <select id="code-trap-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="code-trap-quiz">
        <div class="quiz-header">
          <h4>üìù Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>‚Üê Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next ‚Üí</button>
        </div>
      </div>

      <!-- Activity Carousels for Code Trap Section -->
      <div class="activity-carousels" data-story="code-trap-story">
        <div id="code-trap-comprehension" class="carousel-container"></div>
        <div id="code-trap-application" class="carousel-container"></div>
        <div id="code-trap-synthesis" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 2: Design-First Workflow -->
    <section class="section" id="workflow-section">
      <h2>üìê The Design-First Workflow</h2>
      <p>Five steps that take 2.5 hours but save you days of rework.</p>
      
      <div class="diagram-container" id="workflow-container">
        <div class="diagram-header">
          <span class="diagram-title">üìã The 5-Step Process</span>
        </div>
        <div id="workflow-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="workflow-story-caption">
          <div class="story-step">
            <div class="story-icon visible">üöÄ</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">‚Üí</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">‚ñ∂ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="workflow-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>‚è±Ô∏è</label>
            <select id="workflow-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="workflow-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">üîä</span>
            </button>
          </div>
          <div class="control-group">
            <label>üé§</label>
            <select id="workflow-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="workflow-quiz">
        <div class="quiz-header">
          <h4>üìù Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>‚Üê Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next ‚Üí</button>
        </div>
      </div>

      <!-- Activity Carousels for Workflow Section -->
      <div class="activity-carousels" data-story="workflow-story">
        <div id="workflow-comprehension" class="carousel-container"></div>
        <div id="workflow-application" class="carousel-container"></div>
        <div id="workflow-synthesis" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 3: Design + AI = Superpowers -->
    <section class="section" id="ai-power-section">
      <h2>ü§ñ Design + AI = Superpowers</h2>
      <p>How to leverage AI by being the architect, not just the coder.</p>
      
      <div class="diagram-container" id="ai-power-container">
        <div class="diagram-header">
          <span class="diagram-title">‚ö° The AI Multiplier</span>
        </div>
        <div id="ai-power-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="ai-power-story-caption">
          <div class="story-step">
            <div class="story-icon visible">üöÄ</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">‚Üí</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">‚ñ∂ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="ai-power-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>‚è±Ô∏è</label>
            <select id="ai-power-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="ai-power-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">üîä</span>
            </button>
          </div>
          <div class="control-group">
            <label>üé§</label>
            <select id="ai-power-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="ai-power-quiz">
        <div class="quiz-header">
          <h4>üìù Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>‚Üê Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next ‚Üí</button>
        </div>
      </div>

      <!-- Activity Carousels for AI Power Section -->
      <div class="activity-carousels" data-story="ai-power-story">
        <div id="ai-power-comprehension" class="carousel-container"></div>
        <div id="ai-power-application" class="carousel-container"></div>
        <div id="ai-power-synthesis" class="carousel-container"></div>
      </div>
    </section>

    <!-- Next Steps -->
    <section class="section">
      <h2>üöÄ Next Steps</h2>
      <p>You've learned the architect's mindset. Now put it into practice with a real feature!</p>
      <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr);">
        <a href="../ch5-capstone1/" class="card">
          <div class="card-icon">üéØ</div>
          <h3>Capstone I: Lead a Feature</h3>
          <p>Apply design-first thinking to a real project from start to finish.</p>
        </a>
        <a href="../index.html" class="card">
          <div class="card-icon">üìö</div>
          <h3>Course Overview</h3>
          <p>See all chapters in the Junior Accelerator course.</p>
        </a>
      </div>
    </section>
  </main>

  <nav class="page-nav">
    <h4>On This Page</h4>
    <ul>
      <li><a href="#code-trap-section">Coding-First Trap</a></li>
      <li><a href="#workflow-section">Design Workflow</a></li>
      <li><a href="#ai-power-section">AI Superpowers</a></li>
    </ul>
  </nav>

  <button class="back-to-top" title="Back to top">‚Üë</button>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-cose-bilkent@4.1.0/cytoscape-cose-bilkent.min.js"></script>
  
  <!-- Interactive Engines -->
  <script src="../../shared/js/interactive/diagram-utils.js"></script>
  <script src="../../shared/js/interactive/audio-engine.js"></script>
  <script src="../../shared/js/interactive/storytelling-diagram.js"></script>
  
  <!-- Activity Carousel System -->
    <!-- Firebase & Activity Tracking -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="../../shared/js/firebase-config.js"></script>
  <script src="../../shared/js/auth.js"></script>
  <script src="../../shared/js/data-service.js"></script>
  <script src="../../shared/js/activity-tracker.js"></script>

  <script src="../../shared/js/interactive/base-activity.js"></script>
  <script src="../../shared/js/interactive/activities/quiz-activity.js"></script>
  <script src="../../shared/js/interactive/activities/true-false-activity.js"></script>
  <script src="../../shared/js/interactive/activities/fill-blank-activity.js"></script>
  <script src="../../shared/js/interactive/activities/sequence-activity.js"></script>
  <script src="../../shared/js/interactive/activities/drag-drop-activity.js"></script>
  <script src="../../shared/js/interactive/activities/connect-edges-activity.js"></script>
  <script src="../../shared/js/interactive/activities/scenario-activity.js"></script>
  <script src="../../shared/js/interactive/activities/prediction-activity.js"></script>
  <script src="../../shared/js/interactive/activities/reflection-activity.js"></script>
  <script src="../../shared/js/interactive/activities/graph-builder-activity.js"></script>
  <script src="../../shared/js/interactive/activity-carousel.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize Firebase FIRST
      if (window.FirebaseApp) {
        window.FirebaseApp.init();
        console.log('‚úÖ Firebase initialized');
      }
      
      // Initialize AuthService and wait for auth state
      if (window.AuthService) {
        window.AuthService.init();
        await window.AuthService.waitForAuthState();
        console.log('üë§ Auth ready:', window.AuthService.getUser()?.email || 'not signed in');
      }
      
      // Initialize ActivityTracker AFTER auth is ready
      const courseId = document.body.dataset.course;
      const lessonId = document.body.dataset.lesson;
      if (courseId && lessonId && window.ActivityTracker) {
        ActivityTracker.init(courseId, lessonId);
        console.log('üéØ ActivityTracker initialized:', courseId, lessonId);
      }

      // Initialize page animations
      DiagramUtils.initPageAnimations();
      DiagramUtils.setupBackToTop();

      // Load story and quiz data from JSON
      const response = await fetch('story.json');
      const pageData = await response.json();

      // Create a shared audio engine pointing to the audio folder
      const audioEngine = new AudioNarrationEngine('audio');

      // ============================================
      // DIAGRAM ELEMENTS (Cytoscape data)
      // ============================================

      const diagramElements = {
        'code-trap': [
          // Starting point
          { data: { id: 'new-feature', label: 'üìã New Feature\nRequest', type: 'external', description: 'Feature lands on your desk' } },
          
          // Junior path
          { data: { id: 'junior-starts', label: 'üíª Start Coding\nImmediately', type: 'service', description: 'Jump into the IDE' } },
          { data: { id: 'hit-wall', label: 'üß± Hit Walls\nRewrite √ó 3', type: 'external', description: 'Problems discovered mid-code' } },
          
          // Senior path
          { data: { id: 'senior-thinks', label: 'üß† Think First\nAsk Questions', type: 'concept', description: 'Clarify before coding' } },
          { data: { id: 'senior-plans', label: 'üìê Plan on Paper\nGet Feedback', type: 'data', description: 'Design before implementation' } },
          { data: { id: 'senior-codes', label: '‚úÖ Code Once\nDone Right', type: 'example', description: 'Implement with confidence' } },
          
          // Edges
          { data: { source: 'new-feature', target: 'junior-starts' } },
          { data: { source: 'junior-starts', target: 'hit-wall' } },
          { data: { source: 'new-feature', target: 'senior-thinks' } },
          { data: { source: 'senior-thinks', target: 'senior-plans' } },
          { data: { source: 'senior-plans', target: 'senior-codes' } }
        ],
        'workflow': [
          // Workflow steps
          { data: { id: 'step-clarify', label: '‚ùì Clarify\n~30 min', type: 'concept', description: 'What exactly is needed?' } },
          { data: { id: 'step-diagram', label: 'üìä Diagram\n~1 hour', type: 'data', description: 'Data flow & components' } },
          { data: { id: 'step-edge-cases', label: '‚ö†Ô∏è Edge Cases\n~30 min', type: 'auth', description: 'What could go wrong?' } },
          { data: { id: 'step-approach', label: 'üìù Approach\n~30 min', type: 'service', description: 'Plain English plan' } },
          { data: { id: 'step-review', label: 'üëÄ Review\n~15 min', type: 'external', description: 'Get senior feedback' } },
          { data: { id: 'total-investment', label: '‚è±Ô∏è 2.5 Hours\nSaves Days', type: 'example', description: 'The architect advantage' } },
          
          // Edges
          { data: { source: 'step-clarify', target: 'step-diagram' } },
          { data: { source: 'step-diagram', target: 'step-edge-cases' } },
          { data: { source: 'step-edge-cases', target: 'step-approach' } },
          { data: { source: 'step-approach', target: 'step-review' } },
          { data: { source: 'step-review', target: 'total-investment' } }
        ],
        'ai-power': [
          // AI workflow nodes
          { data: { id: 'ai-secret', label: 'ü§´ The Secret\nAI ‚â† Designer', type: 'concept', description: 'AI codes, you design' } },
          { data: { id: 'bad-prompt', label: '‚ùå Vague Prompt\nVague Code', type: 'external', description: 'Generic, misses edge cases' } },
          { data: { id: 'good-prompt', label: '‚úÖ Design Doc\n= Perfect Prompt', type: 'example', description: 'Context = quality' } },
          { data: { id: 'you-architect', label: 'üèõÔ∏è You\nThe Architect', type: 'concept', description: 'Strategic thinking' } },
          { data: { id: 'ai-builder', label: 'ü§ñ AI\nThe Builder', type: 'service', description: 'Executes your vision' } },
          { data: { id: 'superpower', label: '‚ö° Superpower\nSenior Output', type: 'page', description: 'Junior time, senior results' } },
          
          // Edges
          { data: { source: 'ai-secret', target: 'bad-prompt' } },
          { data: { source: 'ai-secret', target: 'good-prompt' } },
          { data: { source: 'good-prompt', target: 'you-architect' } },
          { data: { source: 'you-architect', target: 'ai-builder' } },
          { data: { source: 'ai-builder', target: 'superpower' } }
        ]
      };

      // ============================================
      // INITIALIZE STORYTELLING DIAGRAMS
      // ============================================

      const storyToDiagram = {
        'code-trap-story': 'code-trap',
        'workflow-story': 'workflow',
        'ai-power-story': 'ai-power'
      };

      pageData.stories.forEach(story => {
        const diagramKey = storyToDiagram[story.id];
        if (!diagramKey) return;

        const elements = diagramElements[diagramKey];
        if (!elements) return;

        new StorytellingDiagram(
          story.id,
          elements,
          story.steps,
          { audioEngine, storyId: story.id }
        );
      });

      // ============================================
      // INITIALIZE QUIZZES
      // ============================================

      const storyToQuiz = {
        'code-trap-story': 'code-trap-quiz',
        'workflow-story': 'workflow-quiz',
        'ai-power-story': 'ai-power-quiz'
      };

      // ============================================
      // ACTIVITY CAROUSELS - CODE TRAP SECTION
      // ============================================

      const codeTrapComprehension = new ActivityCarousel('code-trap-comprehension', {
        type: 'comprehension',
        sectionId: 'code-trap',
        title: 'Check Your Understanding',
        activities: [
          {
            type: 'quiz',
            id: 'trap-comp-q1',
            question: 'What is the "coding-first trap" that juniors fall into?',
            options: [
              'Writing too much documentation before coding',
              'Starting to code immediately without planning or understanding requirements',
              'Spending too much time in code review',
              'Using too many external libraries'
            ],
            correct: 1,
            explanation: 'The coding-first trap is jumping straight into the IDE without clarifying requirements, drawing diagrams, or planning the approach.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'trap-comp-q2',
            question: 'Why does the senior approach "feel slower" initially but is actually faster?',
            options: [
              'Seniors type faster once they start',
              'Planning upfront prevents multiple rewrites and rework cycles',
              'Seniors skip testing',
              'Seniors delegate the hard work'
            ],
            correct: 1,
            explanation: 'Investing time in planning catches problems when they\'re cheap to fix (on paper) instead of expensive (in code).',
            points: 10
          },
          {
            type: 'true-false',
            id: 'trap-comp-tf1',
            statement: 'Senior engineers code once and done right because they think first and plan on paper.',
            correct: true,
            explanation: 'By clarifying requirements, drawing diagrams, and getting feedback before coding, seniors avoid the discovery-rework cycle.',
            requireReasoning: true,
            minReasoningWords: 8,
            points: 15
          },
          {
            type: 'true-false',
            id: 'trap-comp-tf2',
            statement: 'It\'s faster to start coding immediately and figure things out as you go.',
            correct: false,
            explanation: 'This leads to multiple rewrites. Problems discovered mid-code are expensive to fix. Planning feels slower but saves days.',
            requireReasoning: true,
            minReasoningWords: 8,
            points: 15
          },
          {
            type: 'fill-blank',
            id: 'trap-comp-fill1',
            statement: 'Seniors ask ___ questions, draw the data flow, and identify edge cases on paper before touching code.',
            correctAnswers: ['clarifying', 'probing', 'smart'],
            caseSensitive: false,
            hints: ['Questions that ensure you understand what you\'re building'],
            explanation: 'Clarifying questions prevent building the wrong thing. They define exactly what "done" looks like.',
            points: 10
          },
          {
            type: 'fill-blank',
            id: 'trap-comp-fill2',
            statement: 'The senior writes their approach in plain ___, gets quick feedback, and catches problems when they\'re cheap to fix.',
            correctAnswers: ['English', 'language', 'words', 'text'],
            caseSensitive: false,
            hints: ['Not code, but human-readable description'],
            explanation: 'Writing your approach in plain English forces you to think through the design before implementation.',
            points: 10
          }
        ]
      });
      codeTrapComprehension.init();

      const codeTrapApplication = new ActivityCarousel('code-trap-application', {
        type: 'application',
        sectionId: 'code-trap',
        title: 'Apply What You Learned',
        activities: [
          {
            type: 'sequence',
            id: 'trap-app-seq1',
            instruction: 'Order the senior approach steps from first to last:',
            items: [
              { id: 's1', text: 'Ask clarifying questions about requirements' },
              { id: 's2', text: 'Draw diagrams (data flow, components)' },
              { id: 's3', text: 'Identify edge cases on paper' },
              { id: 's4', text: 'Get feedback from team before coding' },
              { id: 's5', text: 'Code once, done right' }
            ],
            correctOrder: ['s1', 's2', 's3', 's4', 's5'],
            hints: {
              partial: 'Start with understanding, end with implementation.',
              wrong: 'Questions ‚Üí Diagrams ‚Üí Edge cases ‚Üí Feedback ‚Üí Code'
            },
            explanation: 'The senior workflow: clarify ‚Üí diagram ‚Üí edge cases ‚Üí feedback ‚Üí implement.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'trap-app-dd1',
            instruction: 'Categorize each behavior as Junior or Senior approach:',
            items: [
              { id: 'j1', text: 'Open IDE immediately when assigned a task' },
              { id: 's1', text: 'Ask "What exactly does done look like?"' },
              { id: 'j2', text: 'Figure out requirements while coding' },
              { id: 's2', text: 'Draw a diagram before writing code' },
              { id: 'j3', text: 'Rewrite code 3 times when problems emerge' },
              { id: 's3', text: 'Get 15-minute feedback before starting' }
            ],
            zones: [
              { id: 'junior', label: 'üë∂ Junior Approach', correct: ['j1', 'j2', 'j3'] },
              { id: 'senior', label: 'üßì Senior Approach', correct: ['s1', 's2', 's3'] }
            ],
            explanation: 'Junior = reactive, code-first. Senior = proactive, design-first.',
            points: 20
          },
          {
            type: 'connect-edges',
            id: 'trap-app-connect1',
            instruction: 'Connect each approach to its typical outcome:',
            nodes: [
              { id: 'code-first', label: 'üíª Code First' },
              { id: 'think-first', label: 'üß† Think First' },
              { id: 'rewrites', label: 'üîÑ Multiple Rewrites' },
              { id: 'smooth', label: '‚úÖ Smooth Reviews' },
              { id: 'walls', label: 'üß± Hit Walls Mid-Code' },
              { id: 'right', label: 'üéØ Code Once, Done Right' }
            ],
            solution: {
              edges: [
                { source: 'code-first', target: 'rewrites' },
                { source: 'code-first', target: 'walls' },
                { source: 'think-first', target: 'smooth' },
                { source: 'think-first', target: 'right' }
              ]
            },
            explanation: 'Code-first leads to walls and rewrites. Think-first leads to smooth reviews and done right.',
            points: 25
          },
          {
            type: 'quiz',
            id: 'trap-app-quiz1',
            question: 'You receive a feature request with vague requirements. What\'s the senior move?',
            options: [
              'Start coding and clarify later',
              'Wait until someone gives you detailed specs',
              'Schedule 30 minutes to ask clarifying questions before touching code',
              'Estimate based on assumptions'
            ],
            correct: 2,
            explanation: 'Seniors proactively clarify requirements. 30 minutes of questions can save days of rework.',
            points: 15
          },
          {
            type: 'sequence',
            id: 'trap-app-seq2',
            instruction: 'Order these from most expensive to least expensive place to find problems:',
            items: [
              { id: 'p1', text: 'In production (users affected)' },
              { id: 'p2', text: 'During code review' },
              { id: 'p3', text: 'While coding (mid-implementation)' },
              { id: 'p4', text: 'On paper (during design)' }
            ],
            correctOrder: ['p1', 'p2', 'p3', 'p4'],
            hints: {
              partial: 'Production is most expensive, paper is cheapest.',
              wrong: 'Cost decreases: Production ‚Üí Review ‚Üí Coding ‚Üí Paper'
            },
            explanation: 'Finding problems on paper is free. Finding them in production is extremely expensive.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'trap-app-dd2',
            instruction: 'Match each time investment to its value:',
            items: [
              { id: 't1', text: '30 min clarifying requirements' },
              { id: 't2', text: '1 hour drawing diagrams' },
              { id: 't3', text: '15 min getting senior feedback' }
            ],
            zones: [
              { id: 'prevents-wrong', label: 'üéØ Prevents Building Wrong Thing', correct: ['t1'] },
              { id: 'reveals-edge', label: '‚ö†Ô∏è Reveals Edge Cases Early', correct: ['t2'] },
              { id: 'catches-blind', label: 'üëÅÔ∏è Catches Blind Spots', correct: ['t3'] }
            ],
            explanation: 'Each planning activity prevents a different class of problems.',
            points: 15
          }
        ]
      });
      codeTrapApplication.init();

      const codeTrapSynthesis = new ActivityCarousel('code-trap-synthesis', {
        type: 'synthesis',
        sectionId: 'code-trap',
        title: 'Think Deeper',
        activities: [
          {
            type: 'scenario',
            id: 'trap-syn-sc1',
            scenario: 'You\'re assigned a feature to add "user notifications." You could start coding immediately (estimated 2 days) or spend 2 hours planning first. Your PM is pushing for fast delivery.',
            question: 'How would you approach this, and what would you tell your PM?',
            evaluation: {
              keywords: ['clarify', 'requirements', 'diagram', 'edge cases', 'faster', 'total time', 'rework', 'plan'],
              minWords: 40,
              pointsPerKeyword: 4,
              depthBonus: 10
            },
            modelAnswer: 'I\'d explain that 2 hours planning saves days of rework. I\'d clarify: What triggers notifications? Email, push, in-app? What\'s the priority? Then diagram the data flow, identify edge cases (user preferences, failures), and get quick feedback before coding. Total time will actually be less.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'trap-syn-pred1',
            setup: {
              type: 'text',
              content: 'Developer A: Gets feature request, opens IDE, starts coding immediately. Works for 3 days.\n\nDeveloper B: Gets same feature, spends 2 hours clarifying and diagramming, then codes for 2 days.'
            },
            question: 'Who will likely deliver a better feature with fewer bugs and less rework?',
            correctAnswer: 'B',
            acceptableVariants: ['b', 'developer b', 'dev b', 'second'],
            explanation: 'Developer B\'s 2-hour investment catches problems early. Developer A will likely hit walls and need rewrites, taking more total time.',
            commonMistakes: {
              'A': 'Developer A feels faster initially but will likely hit walls and need to rewrite.'
            },
            points: 15
          },
          {
            type: 'scenario',
            id: 'trap-syn-sc2',
            scenario: 'Halfway through coding a feature, you realize your approach won\'t handle a key edge case. You\'ve already written 500 lines of code.',
            question: 'What would you do differently next time, and how would you handle this situation now?',
            evaluation: {
              keywords: ['paper', 'diagram', 'edge case', 'early', 'before', 'plan', 'cheaper', 'rewrite'],
              minWords: 40,
              pointsPerKeyword: 4,
              depthBonus: 10
            },
            modelAnswer: 'Next time: list edge cases on paper before coding‚Äîfinding this earlier would have been free to fix. Now: don\'t throw away 500 lines without thinking. Evaluate: can I adapt the existing code? If not, is partial rewrite enough? Sometimes the best code to write is deleting bad code.',
            points: 25
          },
          {
            type: 'reflection',
            id: 'trap-syn-ref1',
            prompt: 'Think about a feature you\'ve built recently. Did you plan first or code first? What would you do differently knowing what you know now?',
            thinkingPrompts: [
              'Did you clarify requirements before starting?',
              'Did you draw any diagrams?',
              'Were there rewrites or "aha" moments mid-code?',
              'What edge cases did you miss initially?'
            ],
            evaluation: {
              minWords: 50,
              depthIndicators: [
                { pattern: '(didn\'t|should have|would)', label: 'Self-awareness', points: 5 },
                { pattern: '(diagram|plan|clarify)', label: 'Design-first thinking', points: 5 },
                { pattern: '(rewrite|redo|rework)', label: 'Recognized cost', points: 5 },
                { pattern: '(next time|will|going to)', label: 'Future commitment', points: 5 }
              ],
              maxScore: 20
            },
            points: 20
          },
          {
            type: 'graph-builder',
            id: 'trap-syn-graph1',
            instruction: 'Build the design-first workflow: Requirements ‚Üí Diagrams ‚Üí Edge Cases ‚Üí Feedback ‚Üí Code',
            nodeTypes: [
              { type: 'requirements', label: 'üìã Requirements', color: '#42a5f5' },
              { type: 'diagrams', label: 'üìä Diagrams', color: '#66bb6a' },
              { type: 'edge-cases', label: '‚ö†Ô∏è Edge Cases', color: '#ffa726' },
              { type: 'feedback', label: 'üëÄ Feedback', color: '#7986cb' },
              { type: 'code', label: 'üíª Code', color: '#ef5350' }
            ],
            validation: {
              requiredNodes: ['requirements', 'diagrams', 'edge-cases', 'feedback', 'code'],
              requiredEdges: [
                { from: 'requirements', to: 'diagrams' },
                { from: 'diagrams', to: 'edge-cases' },
                { from: 'edge-cases', to: 'feedback' },
                { from: 'feedback', to: 'code' }
              ],
              optionalNodes: [],
              minNodes: 5,
              maxNodes: 6
            },
            hints: [
              'This is a linear workflow',
              'Code comes last, not first',
              'Each step informs the next'
            ],
            points: 30
          },
          {
            type: 'scenario',
            id: 'trap-syn-sc3',
            scenario: 'A junior on your team says: "All this planning seems like a waste of time. I just want to code and figure it out."',
            question: 'How would you help them understand the value of design-first thinking?',
            evaluation: {
              keywords: ['save', 'time', 'rework', 'cheap', 'expensive', 'paper', 'total', 'experience'],
              minWords: 40,
              pointsPerKeyword: 4,
              depthBonus: 10
            },
            modelAnswer: 'I\'d share my experience of projects where skipping planning led to days of rework. Then offer: try it on your next feature‚Äîspend 2 hours planning, track total time including rewrites. Compare to your last feature. The numbers usually convince people that planning saves time, not wastes it.',
            points: 25
          }
        ]
      });
      codeTrapSynthesis.init();

      // ============================================
      // ACTIVITY CAROUSELS - WORKFLOW SECTION
      // ============================================

      const workflowComprehension = new ActivityCarousel('workflow-comprehension', {
        type: 'comprehension',
        sectionId: 'workflow',
        title: 'Check Your Understanding',
        activities: [
          {
            type: 'quiz',
            id: 'work-comp-q1',
            question: 'What is the first step in the design-first workflow?',
            options: [
              'Draw diagrams',
              'Write the approach document',
              'Clarify requirements',
              'Start coding a prototype'
            ],
            correct: 2,
            explanation: 'Clarification comes first. You need to know exactly what you\'re building before you can design it.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'work-comp-q2',
            question: 'How long does the design-first workflow typically take before coding?',
            options: [
              '15 minutes',
              'About 2.5 hours',
              '1-2 days',
              'A full week'
            ],
            correct: 1,
            explanation: 'The workflow takes about 2.5 hours total (30 min clarify, 1 hour diagram, 30 min edge cases, 30 min approach, 15 min review).',
            points: 10
          },
          {
            type: 'true-false',
            id: 'work-comp-tf1',
            statement: 'The 2.5 hours spent on design typically saves 3-5 days of rework.',
            correct: true,
            explanation: 'This is the architect\'s advantage‚Äîinvesting half a day in planning saves multiple days of rework.',
            requireReasoning: true,
            minReasoningWords: 8,
            points: 15
          },
          {
            type: 'true-false',
            id: 'work-comp-tf2',
            statement: 'You should skip the quick review step if you\'re confident in your design.',
            correct: false,
            explanation: 'Never skip review. Senior experience catches problems you can\'t see yet‚Äîthis is the cheapest feedback you\'ll ever get.',
            requireReasoning: true,
            minReasoningWords: 8,
            points: 15
          },
          {
            type: 'fill-blank',
            id: 'work-comp-fill1',
            statement: 'During the diagram step (~1 hour), you draw ___ flow, component diagrams, and sequence diagrams.',
            correctAnswers: ['data', 'information', 'system'],
            caseSensitive: false,
            hints: ['What moves through your system?'],
            explanation: 'Data flow diagrams show what data goes where‚Äîmaking the invisible visible.',
            points: 10
          },
          {
            type: 'fill-blank',
            id: 'work-comp-fill2',
            statement: 'Finding edge cases on ___ is free; finding them in code is expensive.',
            correctAnswers: ['paper', 'diagrams', 'documents'],
            caseSensitive: false,
            hints: ['Before you write any code'],
            explanation: 'Edge cases discovered during design are free to address. In code, they require rewriting.',
            points: 10
          }
        ]
      });
      workflowComprehension.init();

      const workflowApplication = new ActivityCarousel('workflow-application', {
        type: 'application',
        sectionId: 'workflow',
        title: 'Apply What You Learned',
        activities: [
          {
            type: 'sequence',
            id: 'work-app-seq1',
            instruction: 'Order the 5-step design workflow from first to last:',
            items: [
              { id: 'w1', text: 'Clarify (30 min) - What exactly is needed?' },
              { id: 'w2', text: 'Diagram (1 hour) - Data flow & components' },
              { id: 'w3', text: 'Edge Cases (30 min) - What could go wrong?' },
              { id: 'w4', text: 'Approach Doc (30 min) - Plain English plan' },
              { id: 'w5', text: 'Quick Review (15 min) - Get senior feedback' }
            ],
            correctOrder: ['w1', 'w2', 'w3', 'w4', 'w5'],
            hints: {
              partial: 'Start with understanding requirements.',
              wrong: 'Clarify ‚Üí Diagram ‚Üí Edge Cases ‚Üí Approach ‚Üí Review'
            },
            explanation: 'The workflow builds: understand ‚Üí visualize ‚Üí protect ‚Üí document ‚Üí validate.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'work-app-dd1',
            instruction: 'Match each workflow step to what it produces:',
            items: [
              { id: 'p1', text: 'Clear success criteria and scope' },
              { id: 'p2', text: 'Visual representation of system' },
              { id: 'p3', text: 'List of potential failure modes' },
              { id: 'p4', text: 'Written plan with key decisions' },
              { id: 'p5', text: 'Validated approach with expert input' }
            ],
            zones: [
              { id: 'clarify', label: '‚ùì Clarify', correct: ['p1'] },
              { id: 'diagram', label: 'üìä Diagram', correct: ['p2'] },
              { id: 'edge', label: '‚ö†Ô∏è Edge Cases', correct: ['p3'] },
              { id: 'approach', label: 'üìù Approach', correct: ['p4'] },
              { id: 'review', label: 'üëÄ Review', correct: ['p5'] }
            ],
            explanation: 'Each step produces a specific deliverable that informs the next.',
            points: 20
          },
          {
            type: 'connect-edges',
            id: 'work-app-connect1',
            instruction: 'Connect each type of diagram to what it shows:',
            nodes: [
              { id: 'data-flow', label: 'üîÑ Data Flow' },
              { id: 'component', label: 'üì¶ Component' },
              { id: 'sequence', label: '‚è±Ô∏è Sequence' },
              { id: 'what-where', label: 'What data goes where' },
              { id: 'pieces', label: 'What pieces are involved' },
              { id: 'order', label: 'What happens in what order' }
            ],
            solution: {
              edges: [
                { source: 'data-flow', target: 'what-where' },
                { source: 'component', target: 'pieces' },
                { source: 'sequence', target: 'order' }
              ]
            },
            explanation: 'Different diagrams answer different questions about your system.',
            points: 25
          },
          {
            type: 'quiz',
            id: 'work-app-quiz1',
            question: 'Why get a quick review before coding, even if you\'re confident?',
            options: [
              'Company policy requires it',
              'To share blame if it fails',
              'Senior experience catches problems you can\'t see yet',
              'To delay starting the work'
            ],
            correct: 2,
            explanation: 'Seniors have seen patterns and pitfalls you haven\'t. Their 15 minutes can save you days.',
            points: 15
          },
          {
            type: 'sequence',
            id: 'work-app-seq2',
            instruction: 'Order these edge case questions from most important to least important:',
            items: [
              { id: 'e1', text: 'What if the input is invalid?' },
              { id: 'e2', text: 'What if an external service fails?' },
              { id: 'e3', text: 'What if two users do this simultaneously?' },
              { id: 'e4', text: 'What if the input is empty?' }
            ],
            correctOrder: ['e1', 'e2', 'e3', 'e4'],
            hints: {
              partial: 'All are important, but some are more common.',
              wrong: 'Invalid input ‚Üí External failure ‚Üí Concurrency ‚Üí Empty input'
            },
            explanation: 'All edge cases matter. Invalid inputs and external failures are most common.',
            points: 15
          },
          {
            type: 'drag-drop',
            id: 'work-app-dd2',
            instruction: 'Categorize these questions by which workflow step they belong to:',
            items: [
              { id: 'q1', text: 'What exactly does "done" look like?' },
              { id: 'q2', text: 'What services does this connect to?' },
              { id: 'q3', text: 'What if the database is down?' },
              { id: 'q4', text: 'Why did I choose this approach over alternatives?' }
            ],
            zones: [
              { id: 'clarify', label: '‚ùì Clarify', correct: ['q1'] },
              { id: 'diagram', label: 'üìä Diagram', correct: ['q2'] },
              { id: 'edge', label: '‚ö†Ô∏è Edge Cases', correct: ['q3'] },
              { id: 'approach', label: 'üìù Approach', correct: ['q4'] }
            ],
            explanation: 'Each step focuses on different questions.',
            points: 20
          }
        ]
      });
      workflowApplication.init();

      const workflowSynthesis = new ActivityCarousel('workflow-synthesis', {
        type: 'synthesis',
        sectionId: 'workflow',
        title: 'Think Deeper',
        activities: [
          {
            type: 'scenario',
            id: 'work-syn-sc1',
            scenario: 'Your manager says: "We need this feature by Friday. There\'s no time for all this planning‚Äîjust start coding." It\'s Tuesday.',
            question: 'How would you handle this situation while still applying design-first principles?',
            evaluation: {
              keywords: ['compress', 'prioritize', 'parallel', 'risk', 'clarify', 'key decisions', 'trade-off', 'faster'],
              minWords: 45,
              pointsPerKeyword: 4,
              depthBonus: 12
            },
            modelAnswer: 'I\'d compress, not skip. Spend 1 hour total: 15 min clarifying critical requirements, 30 min on key data flow diagram, 15 min listing top edge cases. Then code. Even compressed planning prevents major rewrites. Explain to manager: "1 hour planning saves 1 day of rework."',
            points: 25
          },
          {
            type: 'prediction',
            id: 'work-syn-pred1',
            setup: {
              type: 'text',
              content: 'Feature: Add payment processing\n\nDeveloper A: Codes immediately, finishes in 4 days, but needs 2 days of bug fixes after code review.\n\nDeveloper B: Spends 3 hours planning, codes for 3 days, minor review comments only.'
            },
            question: 'Who delivered faster (total time including fixes)?',
            correctAnswer: 'B',
            acceptableVariants: ['b', 'developer b', 'dev b', 'second'],
            explanation: 'Developer A: 4 + 2 = 6 days total. Developer B: 0.5 (planning) + 3 = 3.5 days total. Planning cuts total time in half.',
            commonMistakes: {
              'A': 'Developer A spent 6 days total (4 coding + 2 fixing). Developer B spent 3.5 days total.'
            },
            points: 15
          },
          {
            type: 'scenario',
            id: 'work-syn-sc2',
            scenario: 'During the "quick review" step, the senior engineer points out a fundamental flaw in your approach. You\'ve spent 2 hours on planning and feel frustrated.',
            question: 'How should you interpret this feedback, and what should you do?',
            evaluation: {
              keywords: ['cheap', 'better now', 'saved', 'rework', 'grateful', 'learn', 'days', 'iterate'],
              minWords: 40,
              pointsPerKeyword: 4,
              depthBonus: 10
            },
            modelAnswer: 'This is exactly why we get review before coding! Finding this flaw now cost 2 hours. Finding it after coding would cost days. Be grateful, not frustrated. Iterate on the approach, get re-reviewed if needed, then code with confidence. This IS the system working.',
            points: 25
          },
          {
            type: 'reflection',
            id: 'work-syn-ref1',
            prompt: 'Think about the last time you got surprising feedback during code review. Could that feedback have been caught earlier during design review? What would you change?',
            thinkingPrompts: [
              'What was the feedback about?',
              'Was it architectural or just stylistic?',
              'Would a diagram have revealed the issue?',
              'How much rework did it cause?'
            ],
            evaluation: {
              minWords: 50,
              depthIndicators: [
                { pattern: '(architectural|design|approach)', label: 'Design awareness', points: 5 },
                { pattern: '(earlier|before|planning)', label: 'Shift-left thinking', points: 5 },
                { pattern: '(rework|rewrite|change)', label: 'Cost awareness', points: 5 },
                { pattern: '(diagram|review|document)', label: 'Process improvement', points: 5 }
              ],
              maxScore: 20
            },
            points: 20
          },
          {
            type: 'graph-builder',
            id: 'work-syn-graph1',
            instruction: 'Build the time investment diagram: 2.5 hours design ‚Üí saves ‚Üí 3-5 days rework',
            nodeTypes: [
              { type: 'clarify', label: '‚ùì 30min Clarify', color: '#42a5f5' },
              { type: 'diagram', label: 'üìä 1hr Diagram', color: '#66bb6a' },
              { type: 'edge', label: '‚ö†Ô∏è 30min Edge', color: '#ffa726' },
              { type: 'approach', label: 'üìù 30min Approach', color: '#7986cb' },
              { type: 'review', label: 'üëÄ 15min Review', color: '#ef5350' },
              { type: 'savings', label: 'üí∞ 3-5 Days Saved', color: '#ab47bc' }
            ],
            validation: {
              requiredNodes: ['clarify', 'diagram', 'edge', 'review', 'savings'],
              requiredEdges: [
                { from: 'clarify', to: 'diagram' },
                { from: 'review', to: 'savings' }
              ],
              optionalNodes: ['approach'],
              minNodes: 5,
              maxNodes: 7
            },
            hints: [
              'The workflow steps lead to massive time savings',
              'Review catches problems before expensive coding',
              'The return on investment is 10x or more'
            ],
            points: 30
          },
          {
            type: 'scenario',
            id: 'work-syn-sc3',
            scenario: 'A teammate asks: "Why do I need to write an approach doc? I already know what I\'m going to do."',
            question: 'How would you explain the value of writing the approach document?',
            evaluation: {
              keywords: ['think through', 'force', 'communicate', 'review', 'record', 'decisions', 'why', 'future'],
              minWords: 40,
              pointsPerKeyword: 4,
              depthBonus: 10
            },
            modelAnswer: 'Writing forces you to think through details you might skip mentally. It creates a record of decisions and why you made them. It enables meaningful review‚Äîseniors can\'t review what\'s only in your head. And it helps future-you (or teammates) understand the design later.',
            points: 25
          }
        ]
      });
      workflowSynthesis.init();

      // ============================================
      // ACTIVITY CAROUSELS - AI POWER SECTION
      // ============================================

      const aiPowerComprehension = new ActivityCarousel('ai-power-comprehension', {
        type: 'comprehension',
        sectionId: 'ai-power',
        title: 'Check Your Understanding',
        activities: [
          {
            type: 'quiz',
            id: 'ai-comp-q1',
            question: 'What is AI good at and bad at in software development?',
            options: [
              'Good at design, bad at coding',
              'Good at coding, bad at design',
              'Good at everything',
              'Bad at everything'
            ],
            correct: 1,
            explanation: 'AI excels at generating code from clear specifications but struggles with strategic thinking needed for good design.',
            points: 10
          },
          {
            type: 'quiz',
            id: 'ai-comp-q2',
            question: 'Why is a design doc described as the "perfect AI prompt"?',
            options: [
              'It\'s written in AI language',
              'It includes clear context, edge cases, and patterns',
              'It\'s very short',
              'It tells AI to figure things out'
            ],
            correct: 1,
            explanation: 'Design docs provide exactly what AI needs: clear requirements, edge cases to handle, and your architecture patterns.',
            points: 10
          },
          {
            type: 'true-false',
            id: 'ai-comp-tf1',
            statement: 'Vague prompts to AI produce vague, generic code that misses edge cases.',
            correct: true,
            explanation: 'AI output quality directly correlates with prompt quality. Vague input = vague output.',
            requireReasoning: true,
            minReasoningWords: 8,
            points: 15
          },
          {
            type: 'true-false',
            id: 'ai-comp-tf2',
            statement: 'AI can replace the need for design-first thinking because it can figure out requirements.',
            correct: false,
            explanation: 'AI can\'t know your business requirements, codebase patterns, or edge cases. You must provide this context.',
            requireReasoning: true,
            minReasoningWords: 8,
            points: 15
          },
          {
            type: 'fill-blank',
            id: 'ai-comp-fill1',
            statement: 'In the design + AI workflow, YOU are the ___ and AI is the builder.',
            correctAnswers: ['architect', 'designer', 'thinker'],
            caseSensitive: false,
            hints: ['The person who plans the building'],
            explanation: 'You do the strategic thinking; AI executes your vision with speed and precision.',
            points: 10
          },
          {
            type: 'fill-blank',
            id: 'ai-comp-fill2',
            statement: 'The result of design + AI is senior-level output in ___ time.',
            correctAnswers: ['junior', 'junior-level', 'less', 'reduced'],
            caseSensitive: false,
            hints: ['Faster than traditional senior work'],
            explanation: 'Your strategic thinking plus AI\'s speed equals senior-level productivity.',
            points: 10
          }
        ]
      });
      aiPowerComprehension.init();

      const aiPowerApplication = new ActivityCarousel('ai-power-application', {
        type: 'application',
        sectionId: 'ai-power',
        title: 'Apply What You Learned',
        activities: [
          {
            type: 'sequence',
            id: 'ai-app-seq1',
            instruction: 'Order the Design + AI workflow from first to last:',
            items: [
              { id: 'a1', text: 'Clarify requirements and draw diagrams' },
              { id: 'a2', text: 'Write approach doc with edge cases' },
              { id: 'a3', text: 'Give AI your design doc as context' },
              { id: 'a4', text: 'AI generates code based on your design' },
              { id: 'a5', text: 'Review and refine AI output' }
            ],
            correctOrder: ['a1', 'a2', 'a3', 'a4', 'a5'],
            hints: {
              partial: 'Design comes before AI generation.',
              wrong: 'Design ‚Üí Document ‚Üí Prompt AI ‚Üí Generate ‚Üí Review'
            },
            explanation: 'Human strategy first, machine execution second, human verification last.',
            points: 20
          },
          {
            type: 'drag-drop',
            id: 'ai-app-dd1',
            instruction: 'Categorize these as Human Role or AI Role:',
            items: [
              { id: 'h1', text: 'Clarify business requirements' },
              { id: 'h2', text: 'Identify edge cases' },
              { id: 'a1', text: 'Generate boilerplate code' },
              { id: 'h3', text: 'Design system architecture' },
              { id: 'a2', text: 'Transform code patterns' },
              { id: 'h4', text: 'Verify code matches design' }
            ],
            zones: [
              { id: 'human', label: 'üß† Human Role', correct: ['h1', 'h2', 'h3', 'h4'] },
              { id: 'ai', label: 'ü§ñ AI Role', correct: ['a1', 'a2'] }
            ],
            explanation: 'Humans do strategic thinking; AI does execution.',
            points: 20
          },
          {
            type: 'connect-edges',
            id: 'ai-app-connect1',
            instruction: 'Connect each prompt quality to its AI output quality:',
            nodes: [
              { id: 'vague-prompt', label: 'üòï Vague Prompt' },
              { id: 'detailed-prompt', label: 'üìã Detailed Prompt' },
              { id: 'design-doc', label: 'üìê Full Design Doc' },
              { id: 'generic-code', label: 'üîÑ Generic Code' },
              { id: 'good-code', label: '‚úÖ Good Code' },
              { id: 'perfect-code', label: 'üåü Exactly What You Need' }
            ],
            solution: {
              edges: [
                { source: 'vague-prompt', target: 'generic-code' },
                { source: 'detailed-prompt', target: 'good-code' },
                { source: 'design-doc', target: 'perfect-code' }
              ]
            },
            explanation: 'AI output quality directly correlates with input quality.',
            points: 25
          },
          {
            type: 'quiz',
            id: 'ai-app-quiz1',
            question: 'You want AI to implement a feature. What\'s the best prompt approach?',
            options: [
              '"Write code to handle payments"',
              'Paste your design doc with requirements, edge cases, and patterns',
              'Ask AI to figure out what you need',
              '"Make it work like the other payment systems"'
            ],
            correct: 1,
            explanation: 'Design docs provide the context AI needs. Vague prompts produce vague code.',
            points: 15
          },
          {
            type: 'sequence',
            id: 'ai-app-seq2',
            instruction: 'Order these from worst AI prompt to best AI prompt:',
            items: [
              { id: 'p1', text: '"Write code for this feature"' },
              { id: 'p2', text: '"Write code that does X, Y, Z with these inputs"' },
              { id: 'p3', text: 'Design doc + diagrams + edge cases + codebase patterns' },
              { id: 'p4', text: '"Here\'s the requirements doc, implement it"' }
            ],
            correctOrder: ['p1', 'p2', 'p4', 'p3'],
            hints: {
              partial: 'More context = better output.',
              wrong: 'Vague ‚Üí Specific ‚Üí Requirements ‚Üí Full Design'
            },
            explanation: 'Best prompts include full design context, edge cases, and codebase patterns.',
            points: 15
          },
          {
            type: 'drag-drop',
            id: 'ai-app-dd2',
            instruction: 'Match each benefit to Design + AI workflow:',
            items: [
              { id: 'b1', text: 'Senior-level output quality' },
              { id: 'b2', text: 'Junior-level time investment' },
              { id: 'b3', text: 'Fewer rewrites needed' }
            ],
            zones: [
              { id: 'quality', label: 'üìä Quality Benefit', correct: ['b1'] },
              { id: 'speed', label: '‚ö° Speed Benefit', correct: ['b2'] },
              { id: 'efficiency', label: 'üéØ Efficiency Benefit', correct: ['b3'] }
            ],
            explanation: 'Design + AI delivers quality, speed, and efficiency together.',
            points: 20
          }
        ]
      });
      aiPowerApplication.init();

      const aiPowerSynthesis = new ActivityCarousel('ai-power-synthesis', {
        type: 'synthesis',
        sectionId: 'ai-power',
        title: 'Think Deeper',
        activities: [
          {
            type: 'scenario',
            id: 'ai-syn-sc1',
            scenario: 'You need to build an authentication system. You could: A) Ask AI "build auth for my app" or B) Write a design doc with user flows, security requirements, and edge cases, then give that to AI.',
            question: 'Compare the likely outcomes of approach A vs B.',
            evaluation: {
              keywords: ['context', 'edge cases', 'security', 'specific', 'generic', 'rework', 'patterns', 'requirements'],
              minWords: 45,
              pointsPerKeyword: 4,
              depthBonus: 12
            },
            modelAnswer: 'Approach A produces generic auth code‚Äîmisses your specific security requirements, edge cases like account lockout, and integration with your existing user system. Approach B produces exactly what you need because AI has full context. A requires heavy rework; B is nearly production-ready.',
            points: 25
          },
          {
            type: 'prediction',
            id: 'ai-syn-pred1',
            setup: {
              type: 'text',
              content: 'Two developers building the same feature:\n\nDev A: Types prompts as they go, iterating with AI many times.\n\nDev B: Spends 2 hours on design doc first, then gives it to AI for implementation.'
            },
            question: 'Who will likely finish with better code in less total time?',
            correctAnswer: 'B',
            acceptableVariants: ['b', 'dev b', 'developer b', 'second'],
            explanation: 'Dev B\'s upfront design means fewer AI iterations and better-targeted output. Dev A\'s approach leads to many cycles of vague prompts and generic code that needs constant correction.',
            commonMistakes: {
              'A': 'More iterations doesn\'t mean better results. Each vague prompt produces vague code needing fixes.'
            },
            points: 15
          },
          {
            type: 'scenario',
            id: 'ai-syn-sc2',
            scenario: 'A colleague says: "Why bother with design docs? I just iterate with AI until the code works." They ship features, but their code often needs refactoring later.',
            question: 'How would you explain the value of design-first AI collaboration?',
            evaluation: {
              keywords: ['context', 'first time', 'rework', 'quality', 'patterns', 'edge cases', 'iterate', 'right'],
              minWords: 40,
              pointsPerKeyword: 4,
              depthBonus: 10
            },
            modelAnswer: 'Iteration without design is random searching. Design doc gives AI context to get it right the first time. Their refactoring time IS the cost of skipping design. Design + AI = fewer iterations, better code, less rework. Total time is actually lower with design-first.',
            points: 25
          },
          {
            type: 'reflection',
            id: 'ai-syn-ref1',
            prompt: 'Think about how you currently use AI coding tools. Are you an architect directing AI, or are you hoping AI figures things out? What would you change?',
            thinkingPrompts: [
              'Do you provide design context to AI?',
              'Do you include edge cases in prompts?',
              'How often do you need to correct AI output?',
              'Could design docs reduce your iteration cycles?'
            ],
            evaluation: {
              minWords: 50,
              depthIndicators: [
                { pattern: '(vague|unclear|generic)', label: 'Recognizes problem', points: 5 },
                { pattern: '(design|context|document)', label: 'Solution awareness', points: 5 },
                { pattern: '(iterate|correct|rework)', label: 'Cost awareness', points: 5 },
                { pattern: '(will|going to|change)', label: 'Commitment to improve', points: 5 }
              ],
              maxScore: 20
            },
            points: 20
          },
          {
            type: 'graph-builder',
            id: 'ai-syn-graph1',
            instruction: 'Build the Design + AI workflow: You (Architect) ‚Üí Design Doc ‚Üí AI (Builder) ‚Üí Code ‚Üí You (Reviewer) ‚Üí Ship',
            nodeTypes: [
              { type: 'architect', label: 'üèõÔ∏è You: Architect', color: '#42a5f5' },
              { type: 'design', label: 'üìê Design Doc', color: '#66bb6a' },
              { type: 'builder', label: 'ü§ñ AI: Builder', color: '#ffa726' },
              { type: 'code', label: 'üíª Generated Code', color: '#7986cb' },
              { type: 'reviewer', label: 'üîç You: Reviewer', color: '#ef5350' },
              { type: 'ship', label: 'üöÄ Ship!', color: '#ab47bc' }
            ],
            validation: {
              requiredNodes: ['architect', 'design', 'builder', 'code', 'reviewer'],
              requiredEdges: [
                { from: 'architect', to: 'design' },
                { from: 'design', to: 'builder' },
                { from: 'builder', to: 'code' },
                { from: 'code', to: 'reviewer' }
              ],
              optionalNodes: ['ship'],
              minNodes: 5,
              maxNodes: 7
            },
            hints: [
              'You start and end the process',
              'Design doc is the bridge to AI',
              'AI generates, you verify'
            ],
            points: 30
          },
          {
            type: 'scenario',
            id: 'ai-syn-sc3',
            scenario: 'You\'re joining a team that heavily uses AI for coding but doesn\'t do design-first. Their codebase has inconsistent patterns and many bugs.',
            question: 'How would you introduce design-first AI practices to the team?',
            evaluation: {
              keywords: ['demonstrate', 'example', 'show', 'quality', 'compare', 'before after', 'design doc', 'gradually'],
              minWords: 45,
              pointsPerKeyword: 4,
              depthBonus: 12
            },
            modelAnswer: 'Start by demonstrating on my own features. Show the before/after: my features have fewer bugs, consistent patterns, less rework. Share design docs as examples. Offer to review teammates\' designs. Gradually, success speaks for itself. Don\'t mandate‚Äîinspire through results.',
            points: 25
          }
        ]
      });
      aiPowerSynthesis.init();

      console.log('üé† All activity carousels initialized for Junior Ch4: The Age of Architects');
    });
  </script>
</body>
</html>
