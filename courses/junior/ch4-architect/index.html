<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Age of Architects | Junior Accelerator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/css/lesson-interactive.css">
  <link rel="stylesheet" href="../../shared/css/activity-carousel.css">
</head>
<body data-course="junior" data-lesson="ch4-architect">
  <header class="header">
    <div class="header-content">
      <a href="../../index.html" class="logo">
        <div class="logo-icon">ğŸ›ï¸</div>
        <span>Architect</span>
      </a>
      <nav class="nav-links">
        <a href="../index.html">â† Junior</a>
        <a href="../ch3-magnetism/">Ch 3</a>
        <a href="index.html" class="active">Ch 4</a>
        <a href="../ch5-capstone1/">Ch 5: Capstone</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <div class="breadcrumb">
        <a href="../index.html">Junior Accelerator</a>
        <span>/</span>
        <span>The Age of Architects</span>
      </div>
      <h1>ğŸ›ï¸ The Age of Architects</h1>
      <p>Juniors start coding immediately. Seniors start with a diagram. Learn to think before you type.</p>
    </div>

    <!-- Audio Info -->
    <section class="section audio-info-section">
      <div class="info-box compact">
        <div class="info-header">
          <span class="info-icon">ğŸ™ï¸</span>
          <div>
            <h4>Interactive Learning Experience</h4>
            <p>Watch diagrams come alive with AI narration â€¢ Click dots to jump â€¢ Test your understanding with quizzes</p>
          </div>
        </div>
        <div class="voice-options">
          <span class="voice-badge">ğŸ‘©â€ğŸ¤ Female Storyteller</span>
          <span class="voice-badge">ğŸ© Male UK Storyteller</span>
        </div>
      </div>
    </section>

    <!-- Story 1: The Coding-First Trap -->
    <section class="section" id="code-trap-section">
      <h2>ğŸª¤ The Coding-First Trap</h2>
      <p>Why jumping straight to code costs you more time in the long run.</p>
      
      <div class="diagram-container" id="code-trap-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸ”„ Junior vs Senior Approach</span>
        </div>
        <div id="code-trap-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="code-trap-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="code-trap-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="code-trap-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="code-trap-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="code-trap-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="code-trap-quiz">
        <div class="quiz-header">
          <h4>ğŸ“ Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>â† Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next â†’</button>
        </div>
      </div>

      <!-- Activity Carousels for Code Trap Section -->
      <div class="activity-carousels" data-story="code-trap-story">
        <div id="code-trap-comprehension" class="carousel-container"></div>
        <div id="code-trap-application" class="carousel-container"></div>
        <div id="code-trap-synthesis" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 2: Design-First Workflow -->
    <section class="section" id="workflow-section">
      <h2>ğŸ“ The Design-First Workflow</h2>
      <p>Five steps that take 2.5 hours but save you days of rework.</p>
      
      <div class="diagram-container" id="workflow-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸ“‹ The 5-Step Process</span>
        </div>
        <div id="workflow-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="workflow-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="workflow-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="workflow-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="workflow-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="workflow-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="workflow-quiz">
        <div class="quiz-header">
          <h4>ğŸ“ Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>â† Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next â†’</button>
        </div>
      </div>

      <!-- Activity Carousels for Workflow Section -->
      <div class="activity-carousels" data-story="workflow-story">
        <div id="workflow-comprehension" class="carousel-container"></div>
        <div id="workflow-application" class="carousel-container"></div>
        <div id="workflow-synthesis" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 3: Design + AI = Superpowers -->
    <section class="section" id="ai-power-section">
      <h2>ğŸ¤– Design + AI = Superpowers</h2>
      <p>How to leverage AI by being the architect, not just the coder.</p>
      
      <div class="diagram-container" id="ai-power-container">
        <div class="diagram-header">
          <span class="diagram-title">âš¡ The AI Multiplier</span>
        </div>
        <div id="ai-power-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="ai-power-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="ai-power-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="ai-power-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="ai-power-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="ai-power-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="ai-power-quiz">
        <div class="quiz-header">
          <h4>ğŸ“ Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>â† Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next â†’</button>
        </div>
      </div>

      <!-- Activity Carousels for AI Power Section -->
      <div class="activity-carousels" data-story="ai-power-story">
        <div id="ai-power-comprehension" class="carousel-container"></div>
        <div id="ai-power-application" class="carousel-container"></div>
        <div id="ai-power-synthesis" class="carousel-container"></div>
      </div>
    </section>

    <!-- Next Steps -->
    <section class="section">
      <h2>ğŸš€ Next Steps</h2>
      <p>You've learned the architect's mindset. Now put it into practice with a real feature!</p>
      <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr);">
        <a href="../ch5-capstone1/" class="card">
          <div class="card-icon">ğŸ¯</div>
          <h3>Capstone I: Lead a Feature</h3>
          <p>Apply design-first thinking to a real project from start to finish.</p>
        </a>
        <a href="../index.html" class="card">
          <div class="card-icon">ğŸ“š</div>
          <h3>Course Overview</h3>
          <p>See all chapters in the Junior Accelerator course.</p>
        </a>
      </div>
    </section>
  </main>

  <nav class="page-nav">
    <h4>On This Page</h4>
    <ul>
      <li><a href="#code-trap-section">Coding-First Trap</a></li>
      <li><a href="#workflow-section">Design Workflow</a></li>
      <li><a href="#ai-power-section">AI Superpowers</a></li>
    </ul>
  </nav>

  <button class="back-to-top" title="Back to top">â†‘</button>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-cose-bilkent@4.1.0/cytoscape-cose-bilkent.min.js"></script>
  
  <!-- Interactive Engines -->
  <script src="../../shared/js/interactive/diagram-utils.js"></script>
  <script src="../../shared/js/interactive/audio-engine.js"></script>
  <script src="../../shared/js/interactive/storytelling-diagram.js"></script>
  <script src="../../shared/js/interactive/quiz-system.js"></script>
  
  <!-- Activity Carousel System -->
    <!-- Firebase & Activity Tracking -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="../../shared/js/firebase-config.js"></script>
  <script src="../../shared/js/auth.js"></script>
  <script src="../../shared/js/data-service.js"></script>
  <script src="../../shared/js/activity-tracker.js"></script>

  <script src="../../shared/js/interactive/base-activity.js"></script>
  <script src="../../shared/js/interactive/activities/quiz-activity.js"></script>
  <script src="../../shared/js/interactive/activities/true-false-activity.js"></script>
  <script src="../../shared/js/interactive/activities/fill-blank-activity.js"></script>
  <script src="../../shared/js/interactive/activities/sequence-activity.js"></script>
  <script src="../../shared/js/interactive/activities/drag-drop-activity.js"></script>
  <script src="../../shared/js/interactive/activities/connect-edges-activity.js"></script>
  <script src="../../shared/js/interactive/activities/scenario-activity.js"></script>
  <script src="../../shared/js/interactive/activities/prediction-activity.js"></script>
  <script src="../../shared/js/interactive/activities/reflection-activity.js"></script>
  <script src="../../shared/js/interactive/activities/graph-builder-activity.js"></script>
  <script src="../../shared/js/interactive/activity-carousel.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize page animations
      DiagramUtils.initPageAnimations();
      DiagramUtils.setupBackToTop();

      // Load story and quiz data from JSON
      const response = await fetch('story.json');
      const pageData = await response.json();

      // Create a shared audio engine pointing to the audio folder
      const audioEngine = new AudioNarrationEngine('audio');

      // ============================================
      // DIAGRAM ELEMENTS (Cytoscape data)
      // ============================================

      const diagramElements = {
        'code-trap': [
          // Starting point
          { data: { id: 'new-feature', label: 'ğŸ“‹ New Feature\nRequest', type: 'external', description: 'Feature lands on your desk' } },
          
          // Junior path
          { data: { id: 'junior-starts', label: 'ğŸ’» Start Coding\nImmediately', type: 'service', description: 'Jump into the IDE' } },
          { data: { id: 'hit-wall', label: 'ğŸ§± Hit Walls\nRewrite Ã— 3', type: 'external', description: 'Problems discovered mid-code' } },
          
          // Senior path
          { data: { id: 'senior-thinks', label: 'ğŸ§  Think First\nAsk Questions', type: 'concept', description: 'Clarify before coding' } },
          { data: { id: 'senior-plans', label: 'ğŸ“ Plan on Paper\nGet Feedback', type: 'data', description: 'Design before implementation' } },
          { data: { id: 'senior-codes', label: 'âœ… Code Once\nDone Right', type: 'example', description: 'Implement with confidence' } },
          
          // Edges
          { data: { source: 'new-feature', target: 'junior-starts' } },
          { data: { source: 'junior-starts', target: 'hit-wall' } },
          { data: { source: 'new-feature', target: 'senior-thinks' } },
          { data: { source: 'senior-thinks', target: 'senior-plans' } },
          { data: { source: 'senior-plans', target: 'senior-codes' } }
        ],
        'workflow': [
          // Workflow steps
          { data: { id: 'step-clarify', label: 'â“ Clarify\n~30 min', type: 'concept', description: 'What exactly is needed?' } },
          { data: { id: 'step-diagram', label: 'ğŸ“Š Diagram\n~1 hour', type: 'data', description: 'Data flow & components' } },
          { data: { id: 'step-edge-cases', label: 'âš ï¸ Edge Cases\n~30 min', type: 'auth', description: 'What could go wrong?' } },
          { data: { id: 'step-approach', label: 'ğŸ“ Approach\n~30 min', type: 'service', description: 'Plain English plan' } },
          { data: { id: 'step-review', label: 'ğŸ‘€ Review\n~15 min', type: 'external', description: 'Get senior feedback' } },
          { data: { id: 'total-investment', label: 'â±ï¸ 2.5 Hours\nSaves Days', type: 'example', description: 'The architect advantage' } },
          
          // Edges
          { data: { source: 'step-clarify', target: 'step-diagram' } },
          { data: { source: 'step-diagram', target: 'step-edge-cases' } },
          { data: { source: 'step-edge-cases', target: 'step-approach' } },
          { data: { source: 'step-approach', target: 'step-review' } },
          { data: { source: 'step-review', target: 'total-investment' } }
        ],
        'ai-power': [
          // AI workflow nodes
          { data: { id: 'ai-secret', label: 'ğŸ¤« The Secret\nAI â‰  Designer', type: 'concept', description: 'AI codes, you design' } },
          { data: { id: 'bad-prompt', label: 'âŒ Vague Prompt\nVague Code', type: 'external', description: 'Generic, misses edge cases' } },
          { data: { id: 'good-prompt', label: 'âœ… Design Doc\n= Perfect Prompt', type: 'example', description: 'Context = quality' } },
          { data: { id: 'you-architect', label: 'ğŸ›ï¸ You\nThe Architect', type: 'concept', description: 'Strategic thinking' } },
          { data: { id: 'ai-builder', label: 'ğŸ¤– AI\nThe Builder', type: 'service', description: 'Executes your vision' } },
          { data: { id: 'superpower', label: 'âš¡ Superpower\nSenior Output', type: 'page', description: 'Junior time, senior results' } },
          
          // Edges
          { data: { source: 'ai-secret', target: 'bad-prompt' } },
          { data: { source: 'ai-secret', target: 'good-prompt' } },
          { data: { source: 'good-prompt', target: 'you-architect' } },
          { data: { source: 'you-architect', target: 'ai-builder' } },
          { data: { source: 'ai-builder', target: 'superpower' } }
        ]
      };

      // ============================================
      // INITIALIZE STORYTELLING DIAGRAMS
      // ============================================

      const storyToDiagram = {
        'code-trap-story': 'code-trap',
        'workflow-story': 'workflow',
        'ai-power-story': 'ai-power'
      };

      pageData.stories.forEach(story => {
        const diagramKey = storyToDiagram[story.id];
        if (!diagramKey) return;

        const elements = diagramElements[diagramKey];
        if (!elements) return;

        new StorytellingDiagram(
          story.id,
          elements,
          story.steps,
          { audioEngine, storyId: story.id }
        );
      });

      // ============================================
      // INITIALIZE QUIZZES
      // ============================================

      const storyToQuiz = {
        'code-trap-story': 'code-trap-quiz',
        'workflow-story': 'workflow-quiz',
        'ai-power-story': 'ai-power-quiz'
      };

      pageData.quizzes.forEach(quiz => {
        const containerId = storyToQuiz[quiz.storyId];
        if (!containerId) return;
        new Quiz(containerId, quiz.questions);
      });
    });
  </script>
</body>
</html>
