<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 2: Lightning Paths | Junior Accelerator</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="../../shared/css/lesson.css">
  
  <!-- Mermaid for diagrams -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  
  <style>
    :root {
      --chapter-color: var(--accent-lightning);
    }
    
    .hero::before {
      background: 
        radial-gradient(ellipse at 30% 50%, rgba(255, 213, 79, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 30%, rgba(255, 143, 0, 0.15) 0%, transparent 50%);
    }
    
    .story-block {
      border-left-color: var(--accent-lightning);
    }
    
    .story-block::before {
      color: var(--accent-lightning);
    }

    .bug-timeline {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin: 2rem 0;
      padding: 1.5rem;
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
    }

    .bug-step {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      padding: 1rem;
      background: var(--bg-tertiary);
      border-radius: var(--radius-md);
      position: relative;
    }

    .bug-step::before {
      content: '';
      position: absolute;
      left: 2rem;
      top: 100%;
      height: 1rem;
      width: 2px;
      background: var(--accent-lightning);
    }

    .bug-step:last-child::before {
      display: none;
    }

    .bug-step-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .bug-step.wrong {
      border-left: 3px solid var(--error);
    }

    .bug-step.right {
      border-left: 3px solid var(--success);
    }

    .flow-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin: 2rem 0;
    }

    @media (max-width: 768px) {
      .flow-comparison {
        grid-template-columns: 1fr;
      }
    }

    .flow-box {
      padding: 1.5rem;
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
    }

    .flow-box h4 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .flow-box.sync { border-top: 3px solid var(--success); }
    .flow-box.async { border-top: 3px solid var(--warning); }
  </style>
</head>
<body>
  <!-- Progress Bar -->
  <div class="progress-bar"></div>

  <!-- Progress Tracker (Side) -->
  <nav class="progress-tracker">
    <div class="progress-dot active" data-section="hero" title="Start"></div>
    <div class="progress-dot" data-section="trap" title="The Trap"></div>
    <div class="progress-dot" data-section="tracing" title="Data Tracing"></div>
    <div class="progress-dot" data-section="async" title="Async Flows"></div>
    <div class="progress-dot" data-section="quiz" title="Quiz"></div>
    <div class="progress-dot" data-section="project" title="Project"></div>
  </nav>

  <main class="lesson-container">
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         HERO SECTION
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="hero section" data-section="hero">
      <div class="hero-content">
        <span class="hero-chapter">Chapter 2 ‚Ä¢ Week 2</span>
        <div class="hero-icon">‚ö°</div>
        <h1>Lightning Paths</h1>
        <p class="hero-subtitle">
          Juniors debug with print statements. Seniors debug by <strong>tracing the flow</strong>. 
          Learn to follow data like electricity through wires.
        </p>
      </div>
      
      <div class="scroll-indicator">
        <span>Trace the flow</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12l7 7 7-7"/>
        </svg>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         THE JUNIOR TRAP
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="section" data-section="trap">
      <div class="section-content">
        <h2 class="fade-in">ü™§ The Junior Debugging Trap</h2>
        
        <div class="story-block fade-in">
          <p>
            Bug report: "The user's balance shows the wrong number." You open the code. 
            Four hours later, you've added 47 print statements and you're more confused than ever.
          </p>
        </div>

        <h3 class="fade-in">What Juniors Do (The Slow Way)</h3>

        <div class="bug-timeline fade-in">
          <div class="bug-step wrong">
            <span class="bug-step-icon">üëÄ</span>
            <div>
              <strong>1. Stare at the display code</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                "The balance is shown here... but it looks fine..."
              </p>
            </div>
          </div>
          <div class="bug-step wrong">
            <span class="bug-step-icon">üñ®Ô∏è</span>
            <div>
              <strong>2. Add print statements everywhere</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                print(balance), print("here"), print("wtf")
              </p>
            </div>
          </div>
          <div class="bug-step wrong">
            <span class="bug-step-icon">üòµ</span>
            <div>
              <strong>3. Realize the bug is somewhere else</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                "The data must be corrupted before it gets here..."
              </p>
            </div>
          </div>
          <div class="bug-step wrong">
            <span class="bug-step-icon">‚è∞</span>
            <div>
              <strong>4. Hours later: Find it's a race condition in a background job</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                Something runs at midnight that nobody remembers writing.
              </p>
            </div>
          </div>
        </div>

        <h3 class="fade-in">What Seniors Do (The Fast Way)</h3>

        <div class="bug-timeline fade-in">
          <div class="bug-step right">
            <span class="bug-step-icon">üó∫Ô∏è</span>
            <div>
              <strong>1. Map the data flow</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                "What writes to the balance field? Let me list every place."
              </p>
            </div>
          </div>
          <div class="bug-step right">
            <span class="bug-step-icon">‚ö°</span>
            <div>
              <strong>2. Check async processes</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                "Any background jobs? Scheduled tasks? Event handlers?"
              </p>
            </div>
          </div>
          <div class="bug-step right">
            <span class="bug-step-icon">üéØ</span>
            <div>
              <strong>3. Found it in 20 minutes</strong>
              <p style="color: var(--text-muted); margin-top: 0.5rem;">
                "The nightly reconciliation job has a bug in its calculation."
              </p>
            </div>
          </div>
        </div>

        <div class="cta-box fade-in">
          <h3>üí° The Senior Secret</h3>
          <p>
            Instead of searching for WHERE the bug happens, ask: <strong>WHAT touches this data?</strong>
            Make a list. The bug is always in that list.
          </p>
        </div>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         DATA FLOW TRACING
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="section" data-section="tracing">
      <div class="section-content">
        <h2 class="fade-in">üîç The Data Flow Tracing Method</h2>

        <p class="fade-in">
          For any bug, answer these five questions in order:
        </p>

        <div class="diagram-container scale-in">
          <div class="diagram-title">The Five Questions</div>
          <div class="mermaid">
            flowchart TB
              Q1["1Ô∏è‚É£ WHERE is data displayed?"]
              Q2["2Ô∏è‚É£ WHERE is data stored?"]
              Q3["3Ô∏è‚É£ WHAT writes to storage?"]
              Q4["4Ô∏è‚É£ WHEN does each write happen?"]
              Q5["5Ô∏è‚É£ WHAT external data flows in?"]
              
              Q1 --> Q2
              Q2 --> Q3
              Q3 --> Q4
              Q4 --> Q5
              
              Q5 --> BUG["üêõ Bug is in steps 3-5"]
              
              style Q1 fill:#4caf50,color:#fff
              style Q2 fill:#2196f3,color:#fff
              style Q3 fill:#ff9800,color:#fff
              style Q4 fill:#9c27b0,color:#fff
              style Q5 fill:#f44336,color:#fff
              style BUG fill:#1a1a2e,stroke:#f44336,stroke-width:3px,color:#fff
          </div>
        </div>

        <h3 class="fade-in">Example: Balance Bug Trace</h3>

        <div class="diagram-container scale-in">
          <div class="diagram-title">Tracing the Balance</div>
          <div class="mermaid">
            flowchart BT
              DISPLAY["üì± Display (endpoint)"]
              STORAGE["üíæ Balance Field (database)"]
              
              CREATE["CreateAccount<br/>sets initial: 0"]
              PAYMENT["ProcessPayment<br/>decrements"]
              REFUND["ProcessRefund<br/>increments"]
              NIGHTLY["‚ö†Ô∏è NightlyReconciliation<br/>adjusts balance"]
              ADMIN["AdminOverride<br/>sets directly"]
              
              DISPLAY --> STORAGE
              CREATE --> STORAGE
              PAYMENT --> STORAGE
              REFUND --> STORAGE
              NIGHTLY --> STORAGE
              ADMIN --> STORAGE
              
              style NIGHTLY fill:#f44336,color:#fff,stroke:#f44336,stroke-width:3px
              style STORAGE fill:#2196f3,color:#fff
              style DISPLAY fill:#4caf50,color:#fff
          </div>
        </div>

        <div class="code-block scale-in">
          <div class="code-header">
            <span class="code-language">Python - Tracing Script</span>
            <button class="code-copy">Copy</button>
          </div>
          <div class="code-content">
            <pre><code><span class="comment"># Quick script to find all writes to a field</span>
<span class="comment"># Run this in your codebase with: grep -r "balance" --include="*.py"</span>

<span class="comment"># What you're looking for:</span>
<span class="variable">patterns_to_find</span> = [
    <span class="string">"balance ="</span>,        <span class="comment"># Direct assignment</span>
    <span class="string">"balance +="</span>,       <span class="comment"># Increment</span>
    <span class="string">"balance -="</span>,       <span class="comment"># Decrement</span>
    <span class="string">".balance"</span>,         <span class="comment"># Attribute access</span>
    <span class="string">"UPDATE.*balance"</span>, <span class="comment"># Raw SQL</span>
    <span class="string">"set_balance"</span>,      <span class="comment"># Setter methods</span>
]

<span class="comment"># Also check for:</span>
<span class="comment"># - Background jobs (celery tasks, cron jobs)</span>
<span class="comment"># - Event handlers (webhooks, message consumers)</span>
<span class="comment"># - Migration scripts</span>
<span class="comment"># - Admin tools</span></code></pre>
          </div>
          <div class="code-caption">
            <p>
              <span class="icon">üí°</span>
              <strong>Pro tip:</strong> Ask Cursor: "Find all places in this codebase 
              that modify the balance field" ‚Äî AI can search faster than grep.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ASYNC FLOWS
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="section" data-section="async">
      <div class="section-content">
        <h2 class="fade-in">üåä Async Flows: Where Bugs Hide</h2>

        <div class="story-block fade-in">
          <p>
            The most elusive bugs aren't in your request handlers. They're in the 
            background processes that run when nobody's watching.
          </p>
        </div>

        <div class="flow-comparison fade-in">
          <div class="flow-box sync">
            <h4>üü¢ Synchronous (Easy to Debug)</h4>
            <div class="mermaid">
              sequenceDiagram
                participant U as User
                participant A as API
                participant D as Database
                
                U->>A: Request
                A->>D: Query
                D-->>A: Result
                A-->>U: Response
                
                Note over U,D: Linear. Bugs are obvious.
            </div>
          </div>
          
          <div class="flow-box async">
            <h4>üü° Asynchronous (Bugs Hide Here)</h4>
            <div class="mermaid">
              sequenceDiagram
                participant U as User
                participant A as API
                participant Q as Queue
                participant W as Worker
                participant D as Database
                
                U->>A: Request
                A->>Q: Queue Job
                A-->>U: "Processing..."
                
                Note over Q,W: ‚è∞ Later...
                
                Q->>W: Job
                W->>D: Update
                
                Note over W,D: üêõ Bug might be here!
            </div>
          </div>
        </div>

        <h3 class="fade-in">Map Every Async Flow in Your Codebase</h3>

        <div class="concept-grid fade-in">
          <div class="concept-card" style="border-top: 3px solid var(--warning);">
            <div class="concept-card-icon">‚è∞</div>
            <h4>Scheduled Tasks</h4>
            <p>Cron jobs, scheduled functions. Check: What runs at night?</p>
          </div>
          
          <div class="concept-card" style="border-top: 3px solid var(--warning);">
            <div class="concept-card-icon">üì¨</div>
            <h4>Message Queues</h4>
            <p>Celery, RabbitMQ, SQS. Check: What's consuming these messages?</p>
          </div>
          
          <div class="concept-card" style="border-top: 3px solid var(--warning);">
            <div class="concept-card-icon">üîî</div>
            <h4>Event Handlers</h4>
            <p>Webhooks, pub/sub. Check: What happens when X event fires?</p>
          </div>
          
          <div class="concept-card" style="border-top: 3px solid var(--warning);">
            <div class="concept-card-icon">üîÑ</div>
            <h4>Background Workers</h4>
            <p>Sidekiq, Bull. Check: What jobs are in the queue?</p>
          </div>
        </div>

        <div class="code-block scale-in">
          <div class="code-header">
            <span class="code-language">Python - Async Flow Inventory</span>
            <button class="code-copy">Copy</button>
          </div>
          <div class="code-content">
            <pre><code><span class="comment"># Create this for YOUR codebase:</span>

<span class="variable">ASYNC_FLOWS</span> = {
    <span class="string">"scheduled_tasks"</span>: [
        {<span class="string">"name"</span>: <span class="string">"nightly_reconciliation"</span>,
         <span class="string">"schedule"</span>: <span class="string">"0 3 * * *"</span>,
         <span class="string">"touches"</span>: [<span class="string">"balance"</span>, <span class="string">"transactions"</span>]},
        {<span class="string">"name"</span>: <span class="string">"cleanup_old_sessions"</span>,
         <span class="string">"schedule"</span>: <span class="string">"0 0 * * *"</span>,
         <span class="string">"touches"</span>: [<span class="string">"sessions"</span>]},
    ],
    <span class="string">"event_handlers"</span>: [
        {<span class="string">"event"</span>: <span class="string">"payment.succeeded"</span>,
         <span class="string">"handler"</span>: <span class="string">"update_balance"</span>,
         <span class="string">"touches"</span>: [<span class="string">"balance"</span>, <span class="string">"audit_log"</span>]},
    ],
    <span class="string">"background_jobs"</span>: [
        {<span class="string">"name"</span>: <span class="string">"send_notification"</span>,
         <span class="string">"queue"</span>: <span class="string">"notifications"</span>,
         <span class="string">"touches"</span>: [<span class="string">"notification_log"</span>]},
    ],
}

<span class="comment"># Now when debugging "balance" issues, you immediately know:</span>
<span class="comment"># - nightly_reconciliation touches it</span>
<span class="comment"># - payment.succeeded event touches it</span></code></pre>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         QUIZ
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="section" data-section="quiz">
      <div class="section-content">
        <div class="quiz-container" data-activity="quiz-junior-ch2-automation" data-type="quiz" data-points="10" data-answer="B">
          <div class="quiz-header">
            <span class="quiz-icon">üß†</span>
            <h3 class="quiz-title">Knowledge Check</h3>
          </div>

          <p class="quiz-question">
            A user reports their profile picture isn't updating. The upload seems to succeed, 
            but the old image still shows. Where should you look FIRST?
          </p>

          <div class="quiz-options">
            <div class="quiz-option" data-value="A">
              <span class="quiz-option-letter">A</span>
              <span>Add print statements in the upload handler</span>
            </div>
            <div class="quiz-option" data-value="B">
              <span class="quiz-option-letter">B</span>
              <span>List everything that processes uploaded images (resizing, CDN, cache)</span>
            </div>
            <div class="quiz-option" data-value="C">
              <span class="quiz-option-letter">C</span>
              <span>Check if the database field is updating</span>
            </div>
            <div class="quiz-option" data-value="D">
              <span class="quiz-option-letter">D</span>
              <span>Ask the user to clear their browser cache</span>
            </div>
          </div>

          <div class="quiz-feedback" 
               data-correct-msg="Map the flow first! Image uploads often have background processing (resize, CDN upload, cache invalidation). The bug is probably in an async step." 
               data-incorrect-msg="Before diving into code, map what TOUCHES the data. For images: upload ‚Üí storage ‚Üí processing ‚Üí CDN ‚Üí cache. Find the broken step.">
          </div>

          <button class="quiz-btn" disabled>Check Answer</button>
        </div>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         PROJECT
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section class="section" data-section="project">
      <div class="section-content">
        <h2 class="fade-in">üî® Chapter Project: Flow Mapping</h2>

        <div class="story-block fade-in">
          <p>
            Choose 3 critical flows in your codebase. Map them completely ‚Äî including 
            every async process, external call, and potential failure point.
          </p>
        </div>

        <div class="try-it-box fade-in">
          <div class="try-it-header">
            <span class="try-it-icon">üó∫Ô∏è</span>
            <h3 class="try-it-title">Flow Mapping Template</h3>
          </div>

          <p>For each flow, document:</p>

          <ol class="try-it-steps">
            <li>
              <strong>Sequence Diagram</strong><br>
              Every step from user action to final result, including async handoffs.
            </li>
            <li>
              <strong>Data Touchpoints</strong><br>
              What data is read? What data is written? Where?
            </li>
            <li>
              <strong>Async Inventory</strong><br>
              What background jobs, events, or scheduled tasks are involved?
            </li>
            <li>
              <strong>Failure Modes</strong><br>
              What can go wrong? How do you know if it's broken?
            </li>
            <li>
              <strong>Monitoring Gaps</strong><br>
              What alerts would catch issues faster?
            </li>
          </ol>
        </div>

        <div class="code-block scale-in">
          <div class="code-header">
            <span class="code-language">Suggested Flows to Map</span>
          </div>
          <div class="code-content">
            <pre><code><span class="comment"># Pick 3 from your actual codebase:</span>

<span class="number">1.</span> User Registration
   - Signup ‚Üí validation ‚Üí create user ‚Üí send email ‚Üí ...
   
<span class="number">2.</span> Your Core Business Flow
   - Whatever the main thing your product does
   
<span class="number">3.</span> Money/Critical Flow
   - Payments, billing, credits ‚Äî anything financial

<span class="comment"># Deliverables:</span>
junior/ch2-lightning/
‚îú‚îÄ‚îÄ flow-1-registration/
‚îÇ   ‚îú‚îÄ‚îÄ SEQUENCE_DIAGRAM.md
‚îÇ   ‚îú‚îÄ‚îÄ DATA_TOUCHPOINTS.md
‚îÇ   ‚îî‚îÄ‚îÄ FAILURE_MODES.md
‚îú‚îÄ‚îÄ flow-2-core/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ flow-3-critical/
    ‚îî‚îÄ‚îÄ ...</code></pre>
          </div>
        </div>

        <div class="cta-box fade-in">
          <h3>üèÜ Bonus Points</h3>
          <p>
            Find a recent bug in your backlog. Trace it using this method. 
            Document how long the flow mapping approach would have saved.
          </p>
          <a href="../ch3-magnetism/index.html" class="cta-btn">
            <span>Continue to Chapter 3: Integration Mastery</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>
      </div>
    </section>

  </main>

  <!-- Bottom Navigation -->
  <nav class="lesson-nav">
    <button class="nav-btn" onclick="location.href='../ch1-stone/index.html'">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Chapter 1
    </button>
    <button class="nav-btn primary" onclick="location.href='../ch3-magnetism/index.html'">
      Chapter 3: Magnetism
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </button>
  </nav>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <script src="../../shared/js/lesson.js"></script>
  
  <script>
    // Initialize Mermaid with dark theme
    mermaid.initialize({
      startOnLoad: true,
      theme: 'dark',
      themeVariables: {
        primaryColor: '#7986cb',
        primaryTextColor: '#e8e8f0',
        primaryBorderColor: '#7986cb',
        lineColor: '#6a6a80',
        secondaryColor: '#1a1a2e',
        tertiaryColor: '#12121a',
        background: '#16162a',
        mainBkg: '#1a1a2e',
        secondBkg: '#12121a',
        fontFamily: 'Inter, sans-serif'
      },
      flowchart: {
        useMaxWidth: false,
        htmlLabels: true,
        curve: 'basis'
      },
      sequence: {
        useMaxWidth: false,
        diagramMarginX: 30,
        diagramMarginY: 20,
        boxMargin: 10,
        noteMargin: 10
      }
    });
  </script>
  
  <!-- Lesson Integration -->
  <script src="../../shared/js/firebase-config.js"></script>
  <script src="../../shared/js/auth.js"></script>
  <script src="../../shared/js/data-service.js"></script>
  <script src="../../shared/js/lesson-integration.js"></script>
  <script src="../../shared/js/progress-tracker.js"></script>
  <script src="../../shared/js/activity-tracker.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      window.LessonIntegration.init("junior", "ch2-lightning");
        // Initialize progress tracker immediately
        if (window.ProgressTracker) {
          window.ProgressTracker.init("junior", "ch2-lightning");
        }
        if (window.ActivityTracker) {
          window.ActivityTracker.init("junior", "ch2-lightning");
        }
    });
  </script>
</body>
</html>

