<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Bridge | Bridge to Industry</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../shared/css/lesson-interactive.css" />
  </head>
  <body data-course="undergrad" data-lesson="ch0-origins">
    <header class="header">
      <div class="header-content">
        <a href="../../index.html" class="logo">
          <div class="logo-icon">ğŸŒ‰</div>
          <span>The Bridge</span>
        </a>
        <nav class="nav-links">
          <a href="../index.html">â† Undergrad</a>
          <a href="index.html" class="active">Ch 0</a>
          <a href="../ch1-stone/">Ch 1: Stone</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="page-header">
        <div class="breadcrumb">
          <a href="../index.html">Bridge to Industry</a>
          <span>/</span>
          <span>The Bridge</span>
        </div>
        <h1>ğŸŒ‰ The Bridge</h1>
        <p>
          Your CS degree gave you the fundamentals. Now it's time to translate
          that knowledge into industry-ready skills. This is where theory meets
          real-world engineering.
        </p>
      </div>

      <!-- Audio Info -->
      <section class="section audio-info-section">
        <div class="info-box compact">
          <div class="info-header">
            <span class="info-icon">ğŸ™ï¸</span>
            <div>
              <h4>Interactive Learning Experience</h4>
              <p>
                Watch diagrams come alive with AI narration â€¢ Click dots to jump
                â€¢ Test your understanding with quizzes
              </p>
            </div>
          </div>
          <div class="voice-options">
            <span class="voice-badge">ğŸ‘©â€ğŸ¤ Female Storyteller</span>
            <span class="voice-badge">ğŸ© Male UK Storyteller</span>
          </div>
        </div>
      </section>

      <!-- Story 1: The Gap -->
      <section class="section" id="gap-section">
        <h2>ğŸ“ The Gap Nobody Talks About</h2>
        <p>
          Understanding the difference between what you learned and what you'll
          do.
        </p>

        <div class="diagram-container" id="gap-container">
          <div class="diagram-header">
            <span class="diagram-title">ğŸŒ‰ Academic â†’ Industry</span>
          </div>
          <div id="gap-story" class="diagram-canvas storytelling"></div>

          <div class="diagram-story" id="gap-story-caption">
            <div class="story-step">
              <div class="story-icon visible">ğŸš€</div>
              <div class="story-content">
                <div class="story-title visible">Ready to Explore</div>
                <div class="story-text visible">
                  Click any progress dot below to jump to that step, or press
                  Play to watch the full story unfold.
                </div>
                <div class="story-connection" style="display: none">
                  <span class="arrow">â†’</span>
                  <span class="connection-text"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="playback-controls">
            <div class="playback-left">
              <button class="diagram-btn play-btn" data-action="play">
                â–¶ Play
              </button>
            </div>
            <div class="playback-center">
              <div class="story-progress" id="gap-story-progress"></div>
            </div>
            <div class="playback-right">
              <button
                class="diagram-btn small"
                data-action="fit"
                title="Fit to view"
              >
                Fit
              </button>
              <button
                class="diagram-btn small"
                data-action="reset"
                title="Reset view"
              >
                Reset
              </button>
            </div>
          </div>

          <div class="settings-bar">
            <div class="control-group">
              <label>â±ï¸</label>
              <select id="gap-speed-select">
                <option value="1000">1s</option>
                <option value="2000" selected>2s</option>
                <option value="5000">5s</option>
                <option value="10000">10s</option>
              </select>
            </div>
            <div class="control-group">
              <button
                class="audio-toggle"
                id="gap-audio-toggle"
                title="Toggle audio narration"
              >
                <span class="audio-icon">ğŸ”Š</span>
              </button>
            </div>
            <div class="control-group">
              <label>ğŸ¤</label>
              <select id="gap-voice-select" class="voice-select">
                <option value="">Loading...</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Activity Carousels -->
        <div class="activity-carousels" data-story="gap-story">
          <div id="gap-comprehension" class="carousel-container"></div>
          <div id="gap-application" class="carousel-container"></div>
          <div id="gap-synthesis" class="carousel-container"></div>
          <div id="gap-quiz" class="carousel-container"></div>
        </div>
      </section>

      <!-- Story 2: Skills Translation -->
      <section class="section" id="translation-section">
        <h2>ğŸ”„ Your Skills, Translated</h2>
        <p>
          Every academic concept has a production counterpart. Here's your
          translation guide.
        </p>

        <div class="diagram-container" id="translation-container">
          <div class="diagram-header">
            <span class="diagram-title">ğŸ“š Academic â†’ Production</span>
          </div>
          <div id="translation-story" class="diagram-canvas storytelling"></div>

          <div class="diagram-story" id="translation-story-caption">
            <div class="story-step">
              <div class="story-icon visible">ğŸš€</div>
              <div class="story-content">
                <div class="story-title visible">Ready to Explore</div>
                <div class="story-text visible">
                  Click any progress dot below to jump to that step, or press
                  Play to watch the full story unfold.
                </div>
                <div class="story-connection" style="display: none">
                  <span class="arrow">â†’</span>
                  <span class="connection-text"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="playback-controls">
            <div class="playback-left">
              <button class="diagram-btn play-btn" data-action="play">
                â–¶ Play
              </button>
            </div>
            <div class="playback-center">
              <div class="story-progress" id="translation-story-progress"></div>
            </div>
            <div class="playback-right">
              <button
                class="diagram-btn small"
                data-action="fit"
                title="Fit to view"
              >
                Fit
              </button>
              <button
                class="diagram-btn small"
                data-action="reset"
                title="Reset view"
              >
                Reset
              </button>
            </div>
          </div>

          <div class="settings-bar">
            <div class="control-group">
              <label>â±ï¸</label>
              <select id="translation-speed-select">
                <option value="1000">1s</option>
                <option value="2000" selected>2s</option>
                <option value="5000">5s</option>
                <option value="10000">10s</option>
              </select>
            </div>
            <div class="control-group">
              <button
                class="audio-toggle"
                id="translation-audio-toggle"
                title="Toggle audio narration"
              >
                <span class="audio-icon">ğŸ”Š</span>
              </button>
            </div>
            <div class="control-group">
              <label>ğŸ¤</label>
              <select id="translation-voice-select" class="voice-select">
                <option value="">Loading...</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Activity Carousels -->
        <div class="activity-carousels" data-story="translation-story">
          <div id="translation-comprehension" class="carousel-container"></div>
          <div id="translation-application" class="carousel-container"></div>
          <div id="translation-synthesis" class="carousel-container"></div>
          <div id="translation-quiz" class="carousel-container"></div>
        </div>
      </section>

      <!-- Story 3: AI Advantage -->
      <section class="section" id="ai-advantage-section">
        <h2>ğŸ¤– Your AI Advantage</h2>
        <p>
          You're entering the industry at the perfect time. AI is your
          superpower.
        </p>

        <div class="diagram-container" id="ai-advantage-container">
          <div class="diagram-header">
            <span class="diagram-title">âš¡ AI-Augmented New Grad</span>
          </div>
          <div
            id="ai-advantage-story"
            class="diagram-canvas storytelling"
          ></div>

          <div class="diagram-story" id="ai-advantage-story-caption">
            <div class="story-step">
              <div class="story-icon visible">ğŸš€</div>
              <div class="story-content">
                <div class="story-title visible">Ready to Explore</div>
                <div class="story-text visible">
                  Click any progress dot below to jump to that step, or press
                  Play to watch the full story unfold.
                </div>
                <div class="story-connection" style="display: none">
                  <span class="arrow">â†’</span>
                  <span class="connection-text"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="playback-controls">
            <div class="playback-left">
              <button class="diagram-btn play-btn" data-action="play">
                â–¶ Play
              </button>
            </div>
            <div class="playback-center">
              <div
                class="story-progress"
                id="ai-advantage-story-progress"
              ></div>
            </div>
            <div class="playback-right">
              <button
                class="diagram-btn small"
                data-action="fit"
                title="Fit to view"
              >
                Fit
              </button>
              <button
                class="diagram-btn small"
                data-action="reset"
                title="Reset view"
              >
                Reset
              </button>
            </div>
          </div>

          <div class="settings-bar">
            <div class="control-group">
              <label>â±ï¸</label>
              <select id="ai-advantage-speed-select">
                <option value="1000">1s</option>
                <option value="2000" selected>2s</option>
                <option value="5000">5s</option>
                <option value="10000">10s</option>
              </select>
            </div>
            <div class="control-group">
              <button
                class="audio-toggle"
                id="ai-advantage-audio-toggle"
                title="Toggle audio narration"
              >
                <span class="audio-icon">ğŸ”Š</span>
              </button>
            </div>
            <div class="control-group">
              <label>ğŸ¤</label>
              <select id="ai-advantage-voice-select" class="voice-select">
                <option value="">Loading...</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Activity Carousels -->
        <div class="activity-carousels" data-story="ai-advantage-story">
          <div id="ai-advantage-comprehension" class="carousel-container"></div>
          <div id="ai-advantage-application" class="carousel-container"></div>
          <div id="ai-advantage-synthesis" class="carousel-container"></div>
          <div id="ai-advantage-quiz" class="carousel-container"></div>
        </div>
      </section>

      <!-- Next Steps -->
      <section class="section">
        <h2>ğŸš€ Cross the Bridge</h2>
        <p>
          The foundation is set. Let's build production-ready data layers that
          would impress any interviewer.
        </p>
        <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr)">
          <a href="../ch1-stone/" class="card">
            <div class="card-icon">ğŸª¨</div>
            <h3>Chapter 1: Production Data Layers</h3>
            <p>
              Learn to build database schemas, caching strategies, and data
              flows that scale.
            </p>
          </a>
          <a href="../index.html" class="card">
            <div class="card-icon">ğŸ“š</div>
            <h3>Course Overview</h3>
            <p>See all chapters in the Bridge to Industry course.</p>
          </a>
        </div>
      </section>
    </main>

    <nav class="page-nav">
      <h4>On This Page</h4>
      <ul>
        <li><a href="#gap-section">The Gap</a></li>
        <li><a href="#translation-section">Skills Translation</a></li>
        <li><a href="#ai-advantage-section">AI Advantage</a></li>
      </ul>
    </nav>

    <button class="back-to-top" title="Back to top">â†‘</button>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <!-- Firebase & Activity Tracking -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="../../shared/js/firebase-config.js"></script>
  <script src="../../shared/js/auth.js"></script>
  <script src="../../shared/js/data-service.js"></script>
  <script src="../../shared/js/activity-tracker.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-cose-bilkent@4.1.0/cytoscape-cose-bilkent.min.js"></script>

    <!-- Interactive Engines -->
    <script src="../../shared/js/interactive/diagram-utils.js"></script>
    <script src="../../shared/js/interactive/audio-engine.js"></script>
    <script src="../../shared/js/interactive/storytelling-diagram.js"></script>

    <!-- Activity Carousel System -->
    <script src="../../shared/js/interactive/base-activity.js"></script>
    <script src="../../shared/js/interactive/activities/quiz-activity.js"></script>
    <script src="../../shared/js/interactive/activities/true-false-activity.js"></script>
    <script src="../../shared/js/interactive/activities/fill-blank-activity.js"></script>
    <script src="../../shared/js/interactive/activities/sequence-activity.js"></script>
    <script src="../../shared/js/interactive/activities/drag-drop-activity.js"></script>
    <script src="../../shared/js/interactive/activities/connect-edges-activity.js"></script>
    <script src="../../shared/js/interactive/activities/scenario-activity.js"></script>
    <script src="../../shared/js/interactive/activities/prediction-activity.js"></script>
    <script src="../../shared/js/interactive/activities/reflection-activity.js"></script>
    <script src="../../shared/js/interactive/activities/graph-builder-activity.js"></script>
    <script src="../../shared/js/interactive/activity-carousel.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", async () => {
      // Initialize Firebase FIRST
      if (window.FirebaseApp) {
        window.FirebaseApp.init();
        console.log('âœ… Firebase initialized');
      }
      
      // Initialize AuthService and wait for auth state
      if (window.AuthService) {
        window.AuthService.init();
        await window.AuthService.waitForAuthState();
        console.log('ğŸ‘¤ Auth ready:', window.AuthService.getUser()?.email || 'not signed in');
      }
      
      // Initialize ActivityTracker AFTER auth is ready
      const courseId = document.body.dataset.course;
      const lessonId = document.body.dataset.lesson;
      if (courseId && lessonId && window.ActivityTracker) {
        ActivityTracker.init(courseId, lessonId);
        console.log('ğŸ¯ ActivityTracker initialized:', courseId, lessonId);
      }

        // Initialize page animations
        DiagramUtils.initPageAnimations();
        DiagramUtils.setupBackToTop();

        // Load story and quiz data from JSON
        const response = await fetch("story.json");
        const pageData = await response.json();

        // Create a shared audio engine pointing to the audio folder
        const audioEngine = new AudioNarrationEngine("audio");

        // ============================================
        // DIAGRAM ELEMENTS (Cytoscape data)
        // ============================================

        const diagramElements = {
          gap: [
            // The gap between academic and industry
            {
              data: {
                id: "cs-degree",
                label: "ğŸ“ CS Degree\nFundamentals",
                type: "concept",
                description: "Theory and principles",
              },
            },
            {
              data: {
                id: "the-gap",
                label: "ğŸ•³ï¸ The Gap\nThink vs Ship",
                type: "auth",
                description: "The hidden challenge",
              },
            },
            {
              data: {
                id: "academic-world",
                label: "ğŸ“š Academic\nClean Problems",
                type: "data",
                description: "Well-defined specs",
              },
            },
            {
              data: {
                id: "industry-world",
                label: "ğŸ¢ Industry\nMessy Reality",
                type: "external",
                description: "Ambiguous requirements",
              },
            },
            {
              data: {
                id: "bridge",
                label: "ğŸŒ‰ This Course\nYour Bridge",
                type: "example",
                description: "Theory â†’ Practice",
              },
            },
            // Edges
            { data: { source: "cs-degree", target: "the-gap" } },
            { data: { source: "the-gap", target: "academic-world" } },
            { data: { source: "the-gap", target: "industry-world" } },
            { data: { source: "academic-world", target: "bridge" } },
            { data: { source: "industry-world", target: "bridge" } },
          ],
          translation: [
            // Skills translation
            {
              data: {
                id: "solid-foundation",
                label: "ğŸ—ï¸ Your\nFoundation",
                type: "concept",
                description: "CS fundamentals",
              },
            },
            {
              data: {
                id: "data-structures",
                label: "ğŸ“Š Data Structures\nâ†’ Databases",
                type: "data",
                description: "Schemas, indexes, caching",
              },
            },
            {
              data: {
                id: "oop-architecture",
                label: "ğŸ”Œ OOP\nâ†’ Architecture",
                type: "service",
                description: "Services, APIs, contracts",
              },
            },
            {
              data: {
                id: "algorithms-perf",
                label: "âš¡ Algorithms\nâ†’ Performance",
                type: "auth",
                description: "Profiling, scaling",
              },
            },
            {
              data: {
                id: "networking-apis",
                label: "ğŸŒ Networking\nâ†’ API Design",
                type: "external",
                description: "REST, GraphQL, gRPC",
              },
            },
            {
              data: {
                id: "industry-ready",
                label: "ğŸš€ Industry\nReady",
                type: "example",
                description: "Complete translation",
              },
            },
            // Edges
            { data: { source: "solid-foundation", target: "data-structures" } },
            {
              data: { source: "solid-foundation", target: "oop-architecture" },
            },
            { data: { source: "solid-foundation", target: "algorithms-perf" } },
            { data: { source: "solid-foundation", target: "networking-apis" } },
            { data: { source: "data-structures", target: "industry-ready" } },
            { data: { source: "oop-architecture", target: "industry-ready" } },
            { data: { source: "algorithms-perf", target: "industry-ready" } },
            { data: { source: "networking-apis", target: "industry-ready" } },
          ],
          "ai-advantage": [
            // AI advantage
            {
              data: {
                id: "perfect-timing",
                label: "â° Perfect\nTiming",
                type: "concept",
                description: "Enter at the right moment",
              },
            },
            {
              data: {
                id: "understand-faster",
                label: "ğŸ” Understand\nFaster",
                type: "data",
                description: "Explain legacy code",
              },
            },
            {
              data: {
                id: "build-smarter",
                label: "ğŸ—ï¸ Build\nSmarter",
                type: "service",
                description: "Generate, implement",
              },
            },
            {
              data: {
                id: "learn-continuously",
                label: "ğŸ“š Learn\nContinuously",
                type: "auth",
                description: "24/7 senior engineer",
              },
            },
            {
              data: {
                id: "communicate-better",
                label: "ğŸ’¬ Communicate\nBetter",
                type: "external",
                description: "Docs, PRs, meetings",
              },
            },
            {
              data: {
                id: "competitive-edge",
                label: "ğŸ† Competitive\nEdge",
                type: "page",
                description: "Fundamentals + AI speed",
              },
            },
            // Edges
            { data: { source: "perfect-timing", target: "understand-faster" } },
            { data: { source: "perfect-timing", target: "build-smarter" } },
            {
              data: { source: "perfect-timing", target: "learn-continuously" },
            },
            {
              data: { source: "perfect-timing", target: "communicate-better" },
            },
            {
              data: { source: "understand-faster", target: "competitive-edge" },
            },
            { data: { source: "build-smarter", target: "competitive-edge" } },
            {
              data: {
                source: "learn-continuously",
                target: "competitive-edge",
              },
            },
            {
              data: {
                source: "communicate-better",
                target: "competitive-edge",
              },
            },
          ],
        };

        // ============================================
        // INITIALIZE STORYTELLING DIAGRAMS
        // ============================================

        const storyToDiagram = {
          "gap-story": "gap",
          "translation-story": "translation",
          "ai-advantage-story": "ai-advantage",
        };

        pageData.stories.forEach((story) => {
          const diagramKey = storyToDiagram[story.id];
          if (!diagramKey) return;

          const elements = diagramElements[diagramKey];
          if (!elements) return;

          new StorytellingDiagram(story.id, elements, story.steps, {
            audioEngine,
            storyId: story.id,
          });
        });

        // ============================================
        // INITIALIZE QUIZ CAROUSELS (Migrated from Quiz system)
        // ============================================

        const storyToQuizContainer = {
          "gap-story": "gap-quiz",
          "translation-story": "translation-quiz",
          "ai-advantage-story": "ai-advantage-quiz",
        };

        pageData.quizzes.forEach((quiz) => {
          const containerId = storyToQuizContainer[quiz.storyId];
          if (!containerId) return;

          // Transform quiz questions to ActivityCarousel format
          const quizActivities = quiz.questions.map((q, i) => ({
            type: 'quiz',
            id: `${quiz.storyId}-quiz-${i + 1}`,
            question: q.question,
            options: q.options,
            correct: q.correct,
            explanation: q.explanation
          }));

          new ActivityCarousel(containerId, {
            type: 'knowledge-check',
            sectionId: quiz.storyId,
            title: 'ğŸ“ Knowledge Check',
            activities: quizActivities
          });
        });
      });
    </script>
  </body>
</html>
