<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 1: The Bridge to Industry | Bridge to Industry</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/css/lesson-interactive.css">
</head>
<body data-course="undergrad" data-lesson="ch1-stone">
  <header class="header">
    <div class="header-content">
      <a href="../../index.html" class="logo">
        <div class="logo-icon">ğŸ“</div>
        <span>Bridge to Industry</span>
      </a>
      <nav class="nav-links">
        <a href="../index.html">â† Undergrad</a>
        <a href="../ch0-origins/">Ch 0</a>
        <a href="index.html" class="active">Ch 1</a>
        <a href="../ch2-lightning/">Ch 2: Control Flow</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <div class="breadcrumb">
        <a href="../index.html">Bridge to Industry</a>
        <span>/</span>
        <span>Chapter 1: The Bridge</span>
      </div>
      <h1>ğŸ“ The Bridge to Industry</h1>
      <p>You've learned algorithms, data structures, and theory. Now let's connect that knowledge to how software is actually built in the real world. Your academic foundation is solid â€” you just need the translation layer.</p>
    </div>

    <!-- Audio Info -->
    <section class="section audio-info-section">
      <div class="info-box compact">
        <div class="info-header">
          <span class="info-icon">ğŸ™ï¸</span>
          <div>
            <h4>Interactive Learning Experience</h4>
            <p>Watch diagrams come alive with AI narration â€¢ Click dots to jump â€¢ Test your understanding with quizzes</p>
          </div>
        </div>
        <div class="voice-options">
          <span class="voice-badge">ğŸ‘©â€ğŸ¤ Female Storyteller</span>
          <span class="voice-badge">ğŸ© Male UK Storyteller</span>
        </div>
      </div>
    </section>

    <!-- Story 1: The Bridge -->
    <section class="section" id="bridge-section">
      <h2>The Bridge</h2>
      <p>The gap between classroom CS and industry engineering is massive â€” but it doesn't have to be. Your academic foundation is solid. You just need to see how it connects to the real world.</p>
      
      <div class="diagram-container" id="bridge-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸŒ‰ From Classroom to Industry</span>
        </div>
        <div id="bridge-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="bridge-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="bridge-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="bridge-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="bridge-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="bridge-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Activity Carousels -->
      <div class="activity-carousels" data-story="bridge-story">
        <div id="bridge-comprehension" class="carousel-container"></div>
        <div id="bridge-application" class="carousel-container"></div>
        <div id="bridge-synthesis" class="carousel-container"></div>
        <div id="bridge-quiz" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 2: The Translation Layer -->
    <section class="section" id="translation-section">
      <h2>The Translation Layer</h2>
      <p>Everything you learned in class maps to something in industry. Linked lists become choosing the right data store. Big-O becomes performance at scale. Let's decode the translation.</p>
      
      <div class="diagram-container" id="translation-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸ”„ Classroom â†’ Industry</span>
        </div>
        <div id="translation-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="translation-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="translation-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="translation-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="translation-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="translation-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Activity Carousels -->
      <div class="activity-carousels" data-story="translation-story">
        <div id="translation-comprehension" class="carousel-container"></div>
        <div id="translation-application" class="carousel-container"></div>
        <div id="translation-synthesis" class="carousel-container"></div>
        <div id="translation-quiz" class="carousel-container"></div>
      </div>
    </section>

    <!-- Story 3: Industry Patterns -->
    <section class="section" id="patterns-section">
      <h2>Industry Patterns</h2>
      <p>These patterns appear in every production codebase. Repository, Factory, Observer, Dependency Injection â€” learn them once, recognize them everywhere. They're the shared vocabulary of professional engineering.</p>
      
      <div class="diagram-container" id="patterns-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸ­ Design Patterns in Production</span>
        </div>
        <div id="patterns-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="patterns-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="patterns-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="patterns-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="patterns-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="patterns-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Activity Carousels -->
      <div class="activity-carousels" data-story="patterns-story">
        <div id="patterns-comprehension" class="carousel-container"></div>
        <div id="patterns-application" class="carousel-container"></div>
        <div id="patterns-synthesis" class="carousel-container"></div>
        <div id="patterns-quiz" class="carousel-container"></div>
      </div>
    </section>

    <!-- Next Steps -->
    <section class="section">
      <h2>Ready for Chapter 2?</h2>
      <p>You've seen how classroom knowledge bridges to industry patterns. Now let's explore how simple control flow concepts scale to handle millions of requests â€” async programming, event loops, and concurrent thinking.</p>
      <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr);">
        <a href="../ch2-lightning/" class="card">
          <div class="card-icon">âš¡</div>
          <h3>Chapter 2: Control Flow at Scale</h3>
          <p>Learn async/await, event-driven architecture, and concurrent programming patterns.</p>
        </a>
        <a href="../index.html" class="card">
          <div class="card-icon">ğŸ“š</div>
          <h3>Course Overview</h3>
          <p>See all chapters in Bridge to Industry.</p>
        </a>
      </div>
    </section>
  </main>

  <nav class="page-nav">
    <h4>On This Page</h4>
    <ul>
      <li><a href="#bridge-section">The Bridge</a></li>
      <li><a href="#translation-section">Translation Layer</a></li>
      <li><a href="#patterns-section">Industry Patterns</a></li>
    </ul>
  </nav>

  <button class="back-to-top" title="Back to top">â†‘</button>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <!-- Firebase & Activity Tracking -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="../../shared/js/firebase-config.js"></script>
  <script src="../../shared/js/auth.js"></script>
  <script src="../../shared/js/data-service.js"></script>
  <script src="../../shared/js/activity-tracker.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-cose-bilkent@4.1.0/cytoscape-cose-bilkent.min.js"></script>
  
  <!-- Interactive Engines -->
  <script src="../../shared/js/interactive/diagram-utils.js"></script>
  <script src="../../shared/js/interactive/audio-engine.js"></script>
  <script src="../../shared/js/interactive/storytelling-diagram.js"></script>

  <!-- Activity Carousel System -->
  <script src="../../shared/js/interactive/base-activity.js"></script>
  <script src="../../shared/js/interactive/activities/quiz-activity.js"></script>
  <script src="../../shared/js/interactive/activities/true-false-activity.js"></script>
  <script src="../../shared/js/interactive/activities/fill-blank-activity.js"></script>
  <script src="../../shared/js/interactive/activities/sequence-activity.js"></script>
  <script src="../../shared/js/interactive/activities/drag-drop-activity.js"></script>
  <script src="../../shared/js/interactive/activities/connect-edges-activity.js"></script>
  <script src="../../shared/js/interactive/activities/scenario-activity.js"></script>
  <script src="../../shared/js/interactive/activities/prediction-activity.js"></script>
  <script src="../../shared/js/interactive/activities/reflection-activity.js"></script>
  <script src="../../shared/js/interactive/activities/graph-builder-activity.js"></script>
  <script src="../../shared/js/interactive/activity-carousel.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize Firebase FIRST
      if (window.FirebaseApp) {
        window.FirebaseApp.init();
        console.log('âœ… Firebase initialized');
      }
      
      // Initialize AuthService and wait for auth state
      if (window.AuthService) {
        window.AuthService.init();
        await window.AuthService.waitForAuthState();
        console.log('ğŸ‘¤ Auth ready:', window.AuthService.getUser()?.email || 'not signed in');
      }
      
      // Initialize ActivityTracker AFTER auth is ready
      const courseId = document.body.dataset.course;
      const lessonId = document.body.dataset.lesson;
      if (courseId && lessonId && window.ActivityTracker) {
        ActivityTracker.init(courseId, lessonId);
        console.log('ğŸ¯ ActivityTracker initialized:', courseId, lessonId);
      }

      // Initialize page animations
      DiagramUtils.initPageAnimations();
      DiagramUtils.setupBackToTop();

      // Load story and quiz data from JSON
      const response = await fetch('story.json');
      const pageData = await response.json();

      // Create a shared audio engine pointing to the audio folder
      const audioEngine = new AudioNarrationEngine('audio');

      // ============================================
      // DIAGRAM ELEMENTS (Cytoscape data)
      // ============================================

      const diagramElements = {
        'bridge': [
          // The journey from classroom to industry
          { data: { id: 'the-gap', label: 'ğŸ“ The Gap\nExists', type: 'external', description: 'Classroom vs Industry' } },
          { data: { id: 'classroom-skills', label: 'ğŸ“š Your\nFoundation', type: 'concept', description: 'Algorithms, DS, Theory' } },
          { data: { id: 'the-bridge', label: 'ğŸŒ‰ This\nCourse', type: 'service', description: 'The translation layer' } },
          { data: { id: 'industry-ready', label: 'ğŸ’¼ Industry\nReady', type: 'data', description: 'Internships, Jobs, Growth' } },
          { data: { id: 'knowledge-transfer', label: 'ğŸ’¡ Knowledge\nTransfers', type: 'page', description: 'Same concepts apply' } },
          // Edges
          { data: { source: 'the-gap', target: 'classroom-skills' } },
          { data: { source: 'classroom-skills', target: 'the-bridge' } },
          { data: { source: 'the-bridge', target: 'industry-ready' } },
          { data: { source: 'industry-ready', target: 'knowledge-transfer' } }
        ],

        'translation': [
          // Translation layer
          { data: { id: 'same-concepts', label: 'ğŸ”„ Same\nConcepts', type: 'concept', description: 'Different names' } },
          { data: { id: 'theory-to-practice', label: 'ğŸ“ Theory to\nPractice', type: 'service', description: 'Real applications' } },
          { data: { id: 'hash-table-example', label: 'ğŸ”§ Hash Table\nâ†’ Redis', type: 'data', description: 'Fundamentals in action' } },
          { data: { id: 'the-insight', label: 'ğŸ¯ The Key\nInsight', type: 'page', description: 'Fundamentals + Abstractions' } },
          // Edges
          { data: { source: 'same-concepts', target: 'theory-to-practice' } },
          { data: { source: 'theory-to-practice', target: 'hash-table-example' } },
          { data: { source: 'hash-table-example', target: 'the-insight' } }
        ],

        'patterns': [
          // Industry patterns
          { data: { id: 'patterns-everywhere', label: 'ğŸ­ Patterns\nEverywhere', type: 'external', description: 'Shared vocabulary' } },
          { data: { id: 'repository-pattern', label: 'ğŸ”„ Repository\nPattern', type: 'concept', description: 'Abstract data access' } },
          { data: { id: 'factory-pattern', label: 'ğŸ­ Factory\nPattern', type: 'service', description: 'Object creation' } },
          { data: { id: 'dependency-injection', label: 'ğŸ¯ Dependency\nInjection', type: 'auth', description: 'Enables testing' } },
          { data: { id: 'solid-connection', label: 'ğŸ“ SOLID\nConnection', type: 'page', description: 'Academic â†’ Industry' } },
          // Edges
          { data: { source: 'patterns-everywhere', target: 'repository-pattern' } },
          { data: { source: 'repository-pattern', target: 'factory-pattern' } },
          { data: { source: 'factory-pattern', target: 'dependency-injection' } },
          { data: { source: 'dependency-injection', target: 'solid-connection' } }
        ]
      };

      // ============================================
      // INITIALIZE STORYTELLING DIAGRAMS
      // ============================================

      const storyToDiagram = {
        'bridge-story': 'bridge',
        'translation-story': 'translation',
        'patterns-story': 'patterns'
      };

      pageData.stories.forEach(story => {
        const diagramKey = storyToDiagram[story.id];
        if (!diagramKey) return;

        const elements = diagramElements[diagramKey];
        if (!elements) return;

        new StorytellingDiagram(
          story.id,
          elements,
          story.steps,
          { audioEngine, storyId: story.id }
        );
      });

      // ============================================
      // INITIALIZE QUIZ CAROUSELS (Migrated from Quiz system)
      // ============================================

      const storyToQuizContainer = {
        'bridge-story': 'bridge-quiz',
        'translation-story': 'translation-quiz',
        'patterns-story': 'patterns-quiz'
      };

      pageData.quizzes.forEach(quiz => {
        const containerId = storyToQuizContainer[quiz.storyId];
        if (!containerId) return;

        // Transform quiz questions to ActivityCarousel format
        const quizActivities = quiz.questions.map((q, i) => ({
          type: 'quiz',
          id: `${quiz.storyId}-quiz-${i + 1}`,
          question: q.question,
          options: q.options,
          correct: q.correct,
          explanation: q.explanation
        }));

        new ActivityCarousel(containerId, {
          type: 'knowledge-check',
          sectionId: quiz.storyId,
          title: 'ğŸ“ Knowledge Check',
          activities: quizActivities
        });
      });
    });
  </script>
</body>
</html>
