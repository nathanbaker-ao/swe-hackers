<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>Daily Challenges | AutoNateAI</title>
  <meta name="description" content="Daily AI challenges to sharpen your prompt engineering, context design, and agentic workflow skills. Compete, learn, and level up.">
  
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://autonateai.com/challenges">
  <meta property="og:title" content="Daily Challenges | AutoNateAI">
  <meta property="og:description" content="Daily AI challenges to sharpen your prompt engineering and context design skills.">
  <meta property="og:image" content="https://autonateai.com/assets/og-preview.png">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Daily Challenges | AutoNateAI">
  <meta name="twitter:image" content="https://autonateai.com/assets/og-preview.png">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèõÔ∏è</text></svg>">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="shared/css/marketing.css">
  <link rel="stylesheet" href="shared/css/challenge-interactive.css">
  
  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
  
  <!-- Shared Components -->
  <script src="shared/js/navbar.js" defer></script>
  <script src="shared/js/footer.js" defer></script>
</head>
<body>
  
  <!-- Navigation -->
  <nav class="marketing-nav" id="nav">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">
        <span class="nav-logo-icon">üèõÔ∏è</span>
        <span>AutoNateAI</span>
      </a>
      
      <div class="nav-links">
        <a href="catalog.html" class="nav-link">Courses</a>
        <a href="blog/" class="nav-link">Blog</a>
        <a href="consulting.html" class="nav-link">Consulting</a>
        <a href="enterprise.html" class="nav-link">Enterprise</a>
        <a href="challenges.html" class="nav-link" style="color: var(--accent-primary);">Challenges</a>
      </div>
      
      <div class="nav-cta" id="nav-auth">
        <a href="auth/login.html" class="nav-btn secondary">Sign In</a>
        <a href="auth/register.html" class="nav-btn primary">Get Started</a>
      </div>
      
      <button class="mobile-menu-btn" id="mobile-menu-btn">‚ò∞</button>
    </div>
  </nav>
  
  <!-- Loading Overlay (while checking auth) -->
  <div id="auth-check-loading" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--bg-primary, #0a0a0f); z-index: 9999; display: flex; align-items: center; justify-content: center;">
    <div style="text-align: center; color: var(--text-primary, #e8e8f0);">
      <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö°</div>
      <div style="width: 40px; height: 40px; border: 3px solid rgba(121, 134, 203, 0.3); border-top-color: #7986cb; border-radius: 50%; margin: 0 auto 1rem; animation: spin 0.8s linear infinite;"></div>
      <p>Loading challenges...</p>
    </div>
  </div>
  <style>
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
  
  <!-- Hero -->
  <section class="section blog-hero">
    <div class="section-container">
      <div class="section-header">
        <div class="section-badge">‚ö° Daily Challenges</div>
        <h1 class="section-title">Train Your AI Muscle Daily</h1>
        <p class="section-subtitle">
          Sharpen your prompt engineering, context design, and agentic workflow skills 
          with bite-sized daily challenges. Compete with the community and climb the leaderboard.
        </p>
      </div>
    </div>
  </section>
  
  <!-- Streak Display (Authenticated Only) -->
  <section class="section" id="streak-section" style="padding-top: 0; display: none;">
    <div class="section-container">
      <div class="streak-display">
        <span class="streak-icon">üî•</span>
        <div class="streak-info">
          <div class="streak-count" id="streak-count">0 day streak</div>
          <div class="streak-label">Complete all 3 daily challenges to continue your streak!</div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Today's Challenges (Dynamic - changes based on auth state) -->
  <section class="section" id="todays-challenges" style="padding-top: 0;">
    <div class="section-container">
      <div class="section-header" style="margin-bottom: 2rem;">
        <h2 class="section-title">Today's Challenges</h2>
        <p class="section-subtitle" id="challenges-subtitle">
          Sign in to attempt today's challenges and track your progress.
        </p>
      </div>
      
      <!-- Challenges Grid - Populated by JS based on auth state -->
      <div class="daily-challenges-grid" id="challenges-grid">
        <!-- Challenge cards will be inserted here -->
      </div>
      
      <!-- Sign Up CTA (Unauthenticated only) -->
      <div id="signup-cta" style="text-align: center; margin-top: 3rem;">
        <a href="auth/register.html" class="btn btn-primary" style="padding: 1rem 3rem;">
          Start Competing Today ‚Üí
        </a>
      </div>
    </div>
  </section>
  
  <!-- Challenge Categories -->
  <section class="section" style="background: var(--bg-secondary);">
    <div class="section-container">
      <div class="section-header" style="margin-bottom: 3rem;">
        <h2 class="section-title">Challenge Categories</h2>
        <p class="section-subtitle">
          Each day features 3 challenges from different categories. Complete all 3 to maintain your streak!
        </p>
      </div>
      
      <div class="features-grid">
        
        <!-- Prompt Craft -->
        <div class="feature-card">
          <div class="feature-icon">üéØ</div>
          <h3 class="feature-title">Prompt Craft</h3>
          <p class="feature-desc">
            Write the perfect prompt to achieve a specific output. Master the art of clear, 
            effective communication with AI.
          </p>
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 0.85rem;">
            <strong style="color: var(--accent-secondary);">Example:</strong>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">
              "Write a prompt that makes Claude explain recursion to a 5-year-old using only food metaphors."
            </p>
          </div>
        </div>
        
        <!-- Context Engineering -->
        <div class="feature-card">
          <div class="feature-icon">üß©</div>
          <h3 class="feature-title">Context Engineering</h3>
          <p class="feature-desc">
            Structure information for optimal AI consumption. Learn what context to include, 
            what to omit, and how to organize it.
          </p>
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 0.85rem;">
            <strong style="color: var(--accent-secondary);">Example:</strong>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">
              "Given this 500-line file, what 50 lines would you include as context for fixing a specific bug?"
            </p>
          </div>
        </div>
        
        <!-- Non-Deterministic Thinking -->
        <div class="feature-card">
          <div class="feature-icon">üîÆ</div>
          <h3 class="feature-title">Non-Deterministic Thinking</h3>
          <p class="feature-desc">
            Handle AI uncertainty like a pro. Learn to evaluate multiple responses, 
            identify hallucinations, and build robust workflows.
          </p>
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 0.85rem;">
            <strong style="color: var(--accent-secondary);">Example:</strong>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">
              "The AI gave 3 different answers to the same question. How do you decide which is correct?"
            </p>
          </div>
        </div>
        
        <!-- Agentic Workflows -->
        <div class="feature-card">
          <div class="feature-icon">ü§ñ</div>
          <h3 class="feature-title">Agentic Workflows</h3>
          <p class="feature-desc">
            Design multi-step AI processes. Break complex tasks into agent-friendly chunks 
            and chain them together effectively.
          </p>
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 0.85rem;">
            <strong style="color: var(--accent-secondary);">Example:</strong>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">
              "Design an agent workflow that can refactor a React class component to hooks."
            </p>
          </div>
        </div>
        
        <!-- Visual Challenges -->
        <div class="feature-card">
          <div class="feature-icon">üé®</div>
          <h3 class="feature-title">Visual Challenges</h3>
          <p class="feature-desc">
            Create beautiful UI animations and visualizations. Master anime.js, CSS animations, 
            and interactive data displays.
          </p>
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 0.85rem;">
            <strong style="color: var(--accent-secondary);">Example:</strong>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">
              "Create a loading animation that shows data flowing through a neural network."
            </p>
          </div>
        </div>
        
        <!-- Code Review -->
        <div class="feature-card">
          <div class="feature-icon">üîç</div>
          <h3 class="feature-title">Code Review</h3>
          <p class="feature-desc">
            Spot bugs, suggest improvements, and learn to read code critically. 
            Train your eye for quality like a senior engineer.
          </p>
          <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-tertiary); border-radius: var(--radius-md); font-size: 0.85rem;">
            <strong style="color: var(--accent-secondary);">Example:</strong>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">
              "Find 3 bugs and 2 performance issues in this 50-line function."
            </p>
          </div>
        </div>
        
      </div>
    </div>
  </section>
  
  <!-- How It Works -->
  <section class="section">
    <div class="section-container">
      <div class="section-header">
        <div class="section-badge">How It Works</div>
        <h2 class="section-title">Daily Challenge Mechanics</h2>
      </div>
      
      <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2rem; text-align: center;">
        <div>
          <div style="font-size: 3rem; margin-bottom: 1rem;">üåÖ</div>
          <h4 style="margin-bottom: 0.5rem;">New Challenges Daily</h4>
          <p style="font-size: 0.9rem; color: var(--text-secondary);">3 fresh challenges drop at midnight EST. Complete them before the next reset.</p>
        </div>
        <div>
          <div style="font-size: 3rem; margin-bottom: 1rem;">‚è±Ô∏è</div>
          <h4 style="margin-bottom: 0.5rem;">Timed Submissions</h4>
          <p style="font-size: 0.9rem; color: var(--text-secondary);">Some challenges are timed. Faster completions earn bonus points.</p>
        </div>
        <div>
          <div style="font-size: 3rem; margin-bottom: 1rem;">üî•</div>
          <h4 style="margin-bottom: 0.5rem;">Build Your Streak</h4>
          <p style="font-size: 0.9rem; color: var(--text-secondary);">Complete all 3 daily challenges to keep your streak alive. Longer streaks = bigger rewards.</p>
        </div>
        <div>
          <div style="font-size: 3rem; margin-bottom: 1rem;">üèÜ</div>
          <h4 style="margin-bottom: 0.5rem;">Climb the Leaderboard</h4>
          <p style="font-size: 0.9rem; color: var(--text-secondary);">Compete with the community. Weekly and monthly leaderboards with prizes.</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Leaderboard Preview -->
  <section class="section" style="background: var(--bg-secondary);">
    <div class="section-container">
      <div class="section-header">
        <div class="section-badge">üèÜ Leaderboard</div>
        <h2 class="section-title">This Week's Top Performers</h2>
      </div>
      
      <div style="max-width: 600px; margin: 0 auto; background: var(--bg-card); border-radius: var(--radius-lg); overflow: hidden; border: 1px solid rgba(255,255,255,0.05);">
        <div style="display: grid; grid-template-columns: 60px 1fr 100px 80px; padding: 1rem 1.5rem; background: var(--bg-tertiary); font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
          <span>Rank</span>
          <span>Player</span>
          <span style="text-align: right;">Streak</span>
          <span style="text-align: right;">XP</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 60px 1fr 100px 80px; padding: 1rem 1.5rem; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05);">
          <span style="font-size: 1.5rem;">ü•á</span>
          <span style="font-weight: 500;">CodeArchitect42</span>
          <span style="text-align: right; color: var(--accent-warning);">üî• 23 days</span>
          <span style="text-align: right; font-family: var(--font-display); font-weight: 600; color: var(--accent-secondary);">4,250</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 60px 1fr 100px 80px; padding: 1rem 1.5rem; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05);">
          <span style="font-size: 1.5rem;">ü•à</span>
          <span style="font-weight: 500;">PromptMaster</span>
          <span style="text-align: right; color: var(--accent-warning);">üî• 19 days</span>
          <span style="text-align: right; font-family: var(--font-display); font-weight: 600; color: var(--accent-secondary);">3,875</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 60px 1fr 100px 80px; padding: 1rem 1.5rem; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05);">
          <span style="font-size: 1.5rem;">ü•â</span>
          <span style="font-weight: 500;">AIWhisperer</span>
          <span style="text-align: right; color: var(--accent-warning);">üî• 15 days</span>
          <span style="text-align: right; font-family: var(--font-display); font-weight: 600; color: var(--accent-secondary);">3,650</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 60px 1fr 100px 80px; padding: 1rem 1.5rem; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05);">
          <span style="font-size: 1.25rem; color: var(--text-muted);">4</span>
          <span style="font-weight: 500;">SystemsThinker</span>
          <span style="text-align: right; color: var(--accent-warning);">üî• 12 days</span>
          <span style="text-align: right; font-family: var(--font-display); font-weight: 600; color: var(--accent-secondary);">3,200</span>
        </div>
        
        <div style="display: grid; grid-template-columns: 60px 1fr 100px 80px; padding: 1rem 1.5rem; align-items: center;">
          <span style="font-size: 1.25rem; color: var(--text-muted);">5</span>
          <span style="font-weight: 500;">AgenticDev</span>
          <span style="text-align: right; color: var(--accent-warning);">üî• 10 days</span>
          <span style="text-align: right; font-family: var(--font-display); font-weight: 600; color: var(--accent-secondary);">2,950</span>
        </div>
        
        <div style="padding: 1.5rem; background: var(--bg-tertiary); text-align: center;">
          <a href="auth/register.html" style="color: var(--accent-primary); text-decoration: none; font-weight: 500;">
            Sign up to see your rank ‚Üí
          </a>
        </div>
      </div>
    </div>
  </section>
  
  <!-- CTA -->
  <section class="cta-section">
    <h2 class="cta-title">Ready to Challenge Yourself?</h2>
    <p class="cta-subtitle">
      Join hundreds of developers training their AI skills daily.
    </p>
    <div class="cta-buttons">
      <a href="auth/register.html" class="btn btn-primary">
        Start Competing Free ‚Üí
      </a>
      <a href="https://discord.gg/Me5N8tCdkC" target="_blank" class="btn btn-secondary">
        Join Discord Community
      </a>
    </div>
  </section>
  
  <!-- Footer -->
  <footer class="footer" id="footer-placeholder">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-brand">
          <div class="footer-logo">
            <span class="footer-logo-icon">üèõÔ∏è</span>
            <span>AutoNateAI</span>
          </div>
          <p class="footer-desc">
            AI-augmented learning for developers who want to think like architects and build like pros.
          </p>
        </div>
        
        <div class="footer-column">
          <h4>Learning</h4>
          <ul class="footer-links">
            <li><a href="course/apprentice.html">Apprentice Path</a></li>
            <li><a href="course/junior.html">Junior Accelerator</a></li>
            <li><a href="course/senior.html">Senior Amplifier</a></li>
            <li><a href="challenges.html">Daily Challenges</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h4>Company</h4>
          <ul class="footer-links">
            <li><a href="blog/">Blog</a></li>
            <li><a href="consulting.html">Consulting</a></li>
            <li><a href="enterprise.html">Enterprise</a></li>
            <li><a href="https://discord.gg/Me5N8tCdkC" target="_blank">Discord</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h4>Account</h4>
          <ul class="footer-links">
            <li><a href="auth/login.html">Sign In</a></li>
            <li><a href="auth/register.html">Create Account</a></li>
            <li><a href="dashboard/">Dashboard</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p class="footer-copy">¬© 2026 AutoNateAI. All rights reserved.</p>
        <div class="footer-social">
          <a href="https://discord.gg/Me5N8tCdkC" target="_blank" title="Discord">üí¨</a>
          <a href="https://github.com/nathanbaker-ao" target="_blank" title="GitHub">üêô</a>
          <a href="https://twitter.com/autonateai" target="_blank" title="Twitter">üê¶</a>
        </div>
      </div>
    </div>
  </footer>
  
  <!-- Firebase (for auth check) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="shared/js/firebase-config.js"></script>
  <script src="shared/js/auth.js"></script>
  
  <!-- Interactive Components -->
  <script src="shared/js/interactive/diagram-utils.js"></script>
  <script src="shared/js/interactive/audio-engine.js"></script>
  <script src="shared/js/interactive/challenge-diagram.js"></script>
  <script src="shared/js/activity-tracker.js"></script>
  
  <!-- Page Script -->
  <script>
    // Today's date for challenge IDs
    const today = new Date().toISOString().split('T')[0];
    
    // Challenge intro story data (embedded for simplicity, could be loaded from JSON)
    const challengeIntros = {
      'prompt-craft-intro': {
        id: 'prompt-craft-intro',
        elements: [
          { data: { id: 'thinking', label: 'üß† Your Thinking', type: 'concept' } },
          { data: { id: 'prompt', label: 'üìù Prompt', type: 'data' } },
          { data: { id: 'ai', label: 'ü§ñ AI', type: 'service' } },
          { data: { id: 'output', label: '‚ú® Output', type: 'example' } },
          { data: { source: 'thinking', target: 'prompt' } },
          { data: { source: 'prompt', target: 'ai' } },
          { data: { source: 'ai', target: 'output' } }
        ],
        steps: [
          { nodeId: 'thinking', caption: 'The prompt is how you translate your thinking into AI instructions.' },
          { nodeId: 'output', edges: [{ from: 'thinking', to: 'prompt' }, { from: 'prompt', to: 'ai' }, { from: 'ai', to: 'output' }], caption: 'A great prompt leads to a great output. Let\'s craft one.' }
        ]
      },
      'context-engineering-intro': {
        id: 'context-engineering-intro',
        elements: [
          { data: { id: 'raw-info', label: 'üìö Raw Information', type: 'external' } },
          { data: { id: 'context', label: 'üß© Structured Context', type: 'concept' } },
          { data: { id: 'ai', label: 'ü§ñ AI', type: 'service' } },
          { data: { id: 'accuracy', label: 'üéØ Accurate Results', type: 'example' } },
          { data: { source: 'raw-info', target: 'context' } },
          { data: { source: 'context', target: 'ai' } },
          { data: { source: 'ai', target: 'accuracy' } }
        ],
        steps: [
          { nodeId: 'raw-info', caption: 'AI can\'t read your mind. It needs the right context.' },
          { nodeId: 'accuracy', edges: [{ from: 'raw-info', to: 'context' }, { from: 'context', to: 'ai' }, { from: 'ai', to: 'accuracy' }], caption: 'Structure your context well, and accuracy follows.' }
        ]
      },
      'visual-challenge-intro': {
        id: 'visual-challenge-intro',
        elements: [
          { data: { id: 'concept', label: 'üí≠ Concept', type: 'concept' } },
          { data: { id: 'motion', label: 'üé¨ Motion Design', type: 'data' } },
          { data: { id: 'animation', label: '‚ú® Animation', type: 'example' } },
          { data: { source: 'concept', target: 'motion' } },
          { data: { source: 'motion', target: 'animation' } }
        ],
        steps: [
          { nodeId: 'concept', caption: 'Every visualization tells a story through motion.' },
          { nodeId: 'animation', edges: [{ from: 'concept', to: 'motion' }, { from: 'motion', to: 'animation' }], caption: 'Transform your concept into something users can feel.' }
        ]
      }
    };
    
    // Today's challenges data
    const todaysChallenges = [
      {
        id: `challenge-prompt-${today}`,
        category: 'prompt-craft',
        categoryLabel: 'PROMPT CRAFT',
        title: 'The Explanation Challenge',
        description: 'Write a prompt that makes AI explain quantum computing using only cooking metaphors.',
        xp: 50,
        introStory: 'prompt-craft-intro',
        evaluationType: 'length-check',
        minLength: 50
      },
      {
        id: `challenge-context-${today}`,
        category: 'context-engineering',
        categoryLabel: 'CONTEXT ENGINEERING',
        title: 'The Refactor Brief',
        description: 'Given a 200-line legacy function, write the minimal context needed for AI to refactor it safely.',
        xp: 75,
        introStory: 'context-engineering-intro',
        evaluationType: 'keyword-match',
        keywords: 'function,dependencies,constraints,expected behavior,edge cases'
      },
      {
        id: `challenge-visual-${today}`,
        category: 'visual',
        categoryLabel: 'VISUAL',
        title: 'The Animation Challenge',
        description: 'Create an anime.js animation that visualizes a sorting algorithm in action.',
        xp: 100,
        introStory: 'visual-challenge-intro',
        evaluationType: 'length-check',
        minLength: 100
      }
    ];
    
    // Render challenge card
    function renderChallengeCard(challenge, isAuthenticated) {
      const introStory = challengeIntros[challenge.introStory];
      
      // Common elements - intro video is always shown (it's the teaser!)
      const introSection = `
        <!-- Challenge Intro Diagram - Always visible as teaser -->
        <div class="challenge-intro-container">
          <div class="challenge-diagram" id="diagram-${challenge.id}" data-story="${challenge.introStory}"></div>
          <div class="challenge-caption"></div>
          <div class="audio-settings">
            <label>üé§ Voice:</label>
            <select class="voice-select">
              <option value="ballad">Female Storyteller</option>
              <option value="echo">Male UK Storyteller</option>
            </select>
          </div>
        </div>
      `;
      
      if (!isAuthenticated) {
        // Preview mode - show intro video but lock the submission
        return `
          <div class="challenge-card">
            ${introSection}
            
            <!-- Challenge Header -->
            <div class="challenge-header">
              <span class="challenge-badge ${challenge.category}">${challenge.categoryLabel}</span>
              <span class="challenge-xp">+${challenge.xp} XP</span>
            </div>
            
            <!-- Challenge Content -->
            <div class="challenge-content">
              <h3 class="challenge-title">${challenge.title}</h3>
              <p class="challenge-description">${challenge.description}</p>
              
              <!-- Locked Input Area -->
              <div class="challenge-input-area challenge-locked-input">
                <div class="lock-overlay">
                  <span class="lock-icon">üîí</span>
                  <p>Sign in to attempt this challenge</p>
                  <a href="dashboard/challenges.html" class="btn btn-primary go-to-challenge-btn">Start Challenge</a>
                </div>
              </div>
            </div>
          </div>
        `;
      }
      
      // Full interactive card for authenticated users
      return `
        <div class="challenge-card" 
             data-activity="${challenge.id}" 
             data-type="challenge"
             data-points="${challenge.xp}"
             data-date="${today}"
             data-category="${challenge.category}"
             data-evaluation-type="${challenge.evaluationType}"
             ${challenge.keywords ? `data-keywords="${challenge.keywords}"` : ''}
             ${challenge.minLength ? `data-min-length="${challenge.minLength}"` : ''}>
          
          ${introSection}
          
          <!-- Challenge Header -->
          <div class="challenge-header">
            <span class="challenge-badge ${challenge.category}">${challenge.categoryLabel}</span>
            <span class="challenge-xp">+${challenge.xp} XP</span>
          </div>
          
          <!-- Challenge Content -->
          <div class="challenge-content">
            <h3 class="challenge-title">${challenge.title}</h3>
            <p class="challenge-description">${challenge.description}</p>
            
            <!-- Challenge Input -->
            <div class="challenge-input-area">
              <textarea class="challenge-input" placeholder="Enter your response here..."></textarea>
              <button class="challenge-submit" disabled>Submit Answer</button>
            </div>
            
            <!-- Feedback Area -->
            <div class="challenge-feedback"></div>
          </div>
        </div>
      `;
    }
    
    // Initialize challenge diagrams
    function initChallengeDiagrams() {
      todaysChallenges.forEach(challenge => {
        const diagramId = `diagram-${challenge.id}`;
        const container = document.getElementById(diagramId);
        if (!container) return;
        
        const story = challengeIntros[challenge.introStory];
        if (!story) return;
        
        // Initialize audio engine
        const audioEngine = new AudioNarrationEngine('challenges/audio');
        
        // Create diagram
        const diagram = new ChallengeDiagram(diagramId, story, {
          audioEngine,
          audioEnabled: true,
          canvasHeight: 200
        });
        
        // Store reference
        container._challengeDiagram = diagram;
      });
    }
    
    // Check auth state and render appropriate view
    async function initPage() {
      const grid = document.getElementById('challenges-grid');
      const signupCta = document.getElementById('signup-cta');
      const streakSection = document.getElementById('streak-section');
      const subtitle = document.getElementById('challenges-subtitle');
      
      // Check if user is authenticated
      let isAuthenticated = false;
      
      // Initialize Firebase and check auth
      if (window.FirebaseApp && window.AuthService) {
        try {
          window.FirebaseApp.init();
          window.AuthService.init();
          
          const user = await window.AuthService.waitForAuthState();
          isAuthenticated = !!user;
          
          if (isAuthenticated) {
            // User is logged in - redirect to the dashboard challenges page
            console.log('User is authenticated, redirecting to dashboard challenges...');
            window.location.href = 'dashboard/challenges.html';
            return;
          }
        } catch (e) {
          console.log('Auth check failed:', e);
        }
      }
      
      // User is NOT authenticated - show preview/marketing page
      grid.innerHTML = todaysChallenges.map(c => renderChallengeCard(c, false)).join('');
      
      // Initialize diagrams (they're visible to everyone as teasers)
      setTimeout(() => {
        initChallengeDiagrams();
      }, 100);
      
      // Show unauthenticated preview UI
      signupCta.style.display = 'block';
      streakSection.style.display = 'none';
      subtitle.textContent = 'Sign in to attempt today\'s challenges and track your progress.';
      
      // Hide loading overlay
      const loadingOverlay = document.getElementById('auth-check-loading');
      if (loadingOverlay) {
        loadingOverlay.style.display = 'none';
      }
    }
    
    // Navigation scroll effect
    const nav = document.getElementById('nav');
    window.addEventListener('scroll', () => {
      nav.classList.toggle('scrolled', window.scrollY > 50);
    });
    
    // Entry animations
    document.addEventListener('DOMContentLoaded', () => {
      anime({
        targets: '.feature-card, .challenge-card',
        opacity: [0, 1],
        translateY: [30, 0],
        delay: anime.stagger(100),
        duration: 600,
        easing: 'easeOutCubic'
      });
      
      // Initialize page
      initPage();
    });
  </script>
</body>
</html>
