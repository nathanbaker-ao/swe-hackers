<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 4: The Age of Architects | The Apprentice's Path</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../shared/css/lesson-interactive.css">
</head>
<body data-course="apprentice" data-lesson="ch4-architect">
  <header class="header">
    <div class="header-content">
      <a href="../../index.html" class="logo">
        <div class="logo-icon">ğŸ›ï¸</div>
        <span>The Architects</span>
      </a>
      <nav class="nav-links">
        <a href="../index.html">â† Apprentice</a>
        <a href="../ch3-magnetism/">Ch 3</a>
        <a href="index.html" class="active">Ch 4</a>
        <a href="../ch5-capstone1/">Ch 5: Capstone I</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <div class="breadcrumb">
        <a href="../index.html">Apprentice</a>
        <span>/</span>
        <span>Chapter 4: The Age of Architects</span>
      </div>
      <h1>ğŸ›ï¸ The Age of Architects</h1>
      <p>The world of coding has changed. Now you can work <strong>with</strong> AI to build things faster than ever before. Learn how to become an architect who designs and directs.</p>
    </div>

    <!-- Audio Info -->
    <section class="section audio-info-section">
      <div class="info-box compact">
        <div class="info-header">
          <span class="info-icon">ğŸ™ï¸</span>
          <div>
            <h4>Interactive Learning Experience</h4>
            <p>Watch diagrams come alive with AI narration â€¢ Click dots to jump â€¢ Test your understanding with quizzes</p>
          </div>
        </div>
        <div class="voice-options">
          <span class="voice-badge">ğŸ‘©â€ğŸ¤ Female Storyteller</span>
          <span class="voice-badge">ğŸ© Male UK Storyteller</span>
        </div>
      </div>
    </section>

    <!-- Story 1: The Architect Shift -->
    <section class="section" id="architect-shift-section">
      <h2>The Architect Shift</h2>
      <p>Building software used to mean writing every line by hand. AI changes everythingâ€”now you design and direct while AI helps build. Watch the transformation unfold.</p>
      
      <div class="diagram-container" id="architect-shift-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸ›ï¸ From Brick-Stacker to Architect</span>
        </div>
        <div id="architect-shift-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="architect-shift-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="architect-shift-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="architect-shift-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="architect-shift-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="architect-shift-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="architect-shift-quiz">
        <div class="quiz-header">
          <h4>ğŸ“ Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>â† Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next â†’</button>
        </div>
      </div>
    </section>

    <!-- Story 2: Evolution of Coding -->
    <section class="section" id="evolution-section">
      <h2>The Evolution of Coding</h2>
      <p>Coding has gone through different "ages"â€”each one making it easier to build things. From punch cards to AI assistants, see how far we've come.</p>
      
      <div class="diagram-container" id="evolution-container">
        <div class="diagram-header">
          <span class="diagram-title">ğŸ“œ The Four Ages of Programming</span>
        </div>
        <div id="evolution-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="evolution-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="evolution-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="evolution-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="evolution-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="evolution-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="evolution-quiz">
        <div class="quiz-header">
          <h4>ğŸ“ Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>â† Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next â†’</button>
        </div>
      </div>
    </section>

    <!-- Story 3: New Skills -->
    <section class="section" id="new-skills-section">
      <h2>The New Skills That Matter</h2>
      <p>Some skills are less important now. Others are MORE important. Discover the four superpowers that make modern programmers thrive.</p>
      
      <div class="diagram-container" id="new-skills-container">
        <div class="diagram-header">
          <span class="diagram-title">â­ The Four Superpowers</span>
        </div>
        <div id="new-skills-story" class="diagram-canvas storytelling"></div>
        
        <div class="diagram-story" id="new-skills-story-caption">
          <div class="story-step">
            <div class="story-icon visible">ğŸš€</div>
            <div class="story-content">
              <div class="story-title visible">Ready to Explore</div>
              <div class="story-text visible">Click any progress dot below to jump to that step, or press Play to watch the full story unfold.</div>
              <div class="story-connection" style="display: none;">
                <span class="arrow">â†’</span>
                <span class="connection-text"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="playback-controls">
          <div class="playback-left">
            <button class="diagram-btn play-btn" data-action="play">â–¶ Play</button>
          </div>
          <div class="playback-center">
            <div class="story-progress" id="new-skills-story-progress"></div>
          </div>
          <div class="playback-right">
            <button class="diagram-btn small" data-action="fit" title="Fit to view">Fit</button>
            <button class="diagram-btn small" data-action="reset" title="Reset view">Reset</button>
          </div>
        </div>

        <div class="settings-bar">
          <div class="control-group">
            <label>â±ï¸</label>
            <select id="new-skills-speed-select">
              <option value="1000">1s</option>
              <option value="2000" selected>2s</option>
              <option value="5000">5s</option>
              <option value="10000">10s</option>
            </select>
          </div>
          <div class="control-group">
            <button class="audio-toggle" id="new-skills-audio-toggle" title="Toggle audio narration">
              <span class="audio-icon">ğŸ”Š</span>
            </button>
          </div>
          <div class="control-group">
            <label>ğŸ¤</label>
            <select id="new-skills-voice-select" class="voice-select">
              <option value="">Loading...</option>
            </select>
          </div>
        </div>
      </div>

      <div class="quiz-card" id="new-skills-quiz">
        <div class="quiz-header">
          <h4>ğŸ“ Check Your Understanding</h4>
          <div class="quiz-progress">
            <span class="answered">0</span>/<span class="total">3</span> answered
            <span class="score"></span>
          </div>
        </div>
        <div class="quiz-carousel"></div>
        <div class="quiz-nav">
          <button class="quiz-nav-btn prev" disabled>â† Prev</button>
          <div class="quiz-dots"></div>
          <button class="quiz-nav-btn next">Next â†’</button>
        </div>
      </div>
    </section>

    <!-- Next Steps -->
    <section class="section">
      <h2>Ready for Capstone I?</h2>
      <p>You've learned how to think like an architectâ€”designing and directing rather than just coding. Now it's time to put these skills into practice with your first capstone project!</p>
      <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr);">
        <a href="../ch5-capstone1/" class="card">
          <div class="card-icon">ğŸ†</div>
          <h3>Chapter 5: Capstone I</h3>
          <p>Apply your architect skills to build your first real project with AI assistance.</p>
        </a>
        <a href="../index.html" class="card">
          <div class="card-icon">ğŸ“š</div>
          <h3>Course Overview</h3>
          <p>See all chapters in The Apprentice's Path.</p>
        </a>
      </div>
    </section>
  </main>

  <nav class="page-nav">
    <h4>On This Page</h4>
    <ul>
      <li><a href="#architect-shift-section">The Architect Shift</a></li>
      <li><a href="#evolution-section">Evolution of Coding</a></li>
      <li><a href="#new-skills-section">New Skills</a></li>
    </ul>
  </nav>

  <button class="back-to-top" title="Back to top">â†‘</button>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dagre/0.8.5/dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-dagre@2.5.0/cytoscape-dagre.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cytoscape-cose-bilkent@4.1.0/cytoscape-cose-bilkent.min.js"></script>
  
  <!-- Interactive Engines -->
  <script src="../../shared/js/interactive/diagram-utils.js"></script>
  <script src="../../shared/js/interactive/audio-engine.js"></script>
  <script src="../../shared/js/interactive/storytelling-diagram.js"></script>
  <script src="../../shared/js/interactive/quiz-system.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize page animations
      DiagramUtils.initPageAnimations();
      DiagramUtils.setupBackToTop();

      // Load story and quiz data from JSON
      const response = await fetch('story.json');
      const pageData = await response.json();

      // Create a shared audio engine pointing to the audio folder
      const audioEngine = new AudioNarrationEngine('audio');

      // ============================================
      // DIAGRAM ELEMENTS (Cytoscape data)
      // ============================================

      const diagramElements = {
        'architect-shift': [
          // Nodes
          { data: { id: 'old-way', label: 'ğŸ§± Old Way\nHand-made', type: 'external', description: 'Writing every line of code by hand' } },
          { data: { id: 'machines', label: 'âš™ï¸ Machines\nFrameworks', type: 'concept', description: 'Frameworks and libraries to reuse code' } },
          { data: { id: 'ai-helper', label: 'ğŸ¤– AI Helper\nAssistant', type: 'service', description: 'AI that understands your instructions' } },
          { data: { id: 'cursor', label: 'ğŸ’» Cursor\nAI Coding', type: 'auth', description: 'AI coding tools that generate code' } },
          { data: { id: 'architect', label: 'ğŸ›ï¸ Architect\nYou!', type: 'page', description: 'You design and directâ€”AI builds' } },
          // Edges
          { data: { source: 'old-way', target: 'machines' } },
          { data: { source: 'machines', target: 'ai-helper' } },
          { data: { source: 'ai-helper', target: 'cursor' } },
          { data: { source: 'cursor', target: 'architect' } }
        ],

        'evolution': [
          // Nodes
          { data: { id: 'stone-age', label: 'ğŸª¨ Stone Age\nPunch Cards', type: 'external', description: 'Physical cards with punched holes' } },
          { data: { id: 'bronze-age', label: 'âš’ï¸ Bronze Age\nKeyboards', type: 'concept', description: 'Type code and see it on screen' } },
          { data: { id: 'iron-age', label: 'ğŸ”© Iron Age\nFrameworks', type: 'data', description: 'React, Django, Rails - pre-built tools' } },
          { data: { id: 'architect-age', label: 'ğŸ›ï¸ Architects\nAI Tools', type: 'auth', description: 'AI assistants that generate code' } },
          { data: { id: 'your-opportunity', label: 'ğŸš€ You\nPerfect Time', type: 'page', description: 'Learning at the perfect moment' } },
          // Edges
          { data: { source: 'stone-age', target: 'bronze-age' } },
          { data: { source: 'bronze-age', target: 'iron-age' } },
          { data: { source: 'iron-age', target: 'architect-age' } },
          { data: { source: 'architect-age', target: 'your-opportunity' } }
        ],

        'new-skills': [
          // Nodes
          { data: { id: 'old-skills', label: 'ğŸ“ Old Skills\nFading', type: 'external', description: 'Memorizing, fast typing, every line by hand' } },
          { data: { id: 'understanding', label: 'ğŸ§  Understand\nDeeply', type: 'concept', description: 'Know how things work' } },
          { data: { id: 'communicating', label: 'ğŸ’¬ Communicate\nClearly', type: 'concept', description: 'Explain what you want' } },
          { data: { id: 'reading', label: 'ğŸ‘€ Read Code\nCritically', type: 'concept', description: 'Review and verify AI output' } },
          { data: { id: 'planning', label: 'ğŸ“Š Plan with\nDiagrams', type: 'concept', description: 'Sketch ideas before building' } },
          { data: { id: 'new-programmer', label: 'â­ Modern\nProgrammer', type: 'page', description: 'Thinker and communicator' } },
          // Edges
          { data: { source: 'old-skills', target: 'understanding' } },
          { data: { source: 'old-skills', target: 'communicating' } },
          { data: { source: 'old-skills', target: 'reading' } },
          { data: { source: 'old-skills', target: 'planning' } },
          { data: { source: 'understanding', target: 'new-programmer' } },
          { data: { source: 'communicating', target: 'new-programmer' } },
          { data: { source: 'reading', target: 'new-programmer' } },
          { data: { source: 'planning', target: 'new-programmer' } }
        ]
      };

      // ============================================
      // INITIALIZE STORYTELLING DIAGRAMS
      // ============================================

      // Map story IDs to diagram element keys
      const storyToDiagram = {
        'architect-shift-story': 'architect-shift',
        'evolution-story': 'evolution',
        'new-skills-story': 'new-skills'
      };

      // Create storytelling diagrams for each story in the JSON
      pageData.stories.forEach(story => {
        const diagramKey = storyToDiagram[story.id];
        if (!diagramKey) return;

        const elements = diagramElements[diagramKey];
        if (!elements) return;

        new StorytellingDiagram(
          story.id,
          elements,
          story.steps,
          { audioEngine, storyId: story.id }
        );
      });

      // ============================================
      // INITIALIZE QUIZZES
      // ============================================

      // Map story IDs to quiz container IDs
      const storyToQuiz = {
        'architect-shift-story': 'architect-shift-quiz',
        'evolution-story': 'evolution-quiz',
        'new-skills-story': 'new-skills-quiz'
      };

      pageData.quizzes.forEach(quiz => {
        const containerId = storyToQuiz[quiz.storyId];
        if (!containerId) return;

        new Quiz(containerId, quiz.questions);
      });
    });
  </script>
</body>
</html>
