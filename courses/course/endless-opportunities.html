<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Problem Solving Academy | Endless Opportunities x AutoNateAI</title>
    <meta
      name="description"
      content="A 4-week program teaching youth how to solve problems using AI. Master the art of questions, understand data, and build real solutions."
    />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://autonateai.com/course/endless-opportunities.html"
    />
    <meta
      property="og:title"
      content="AI Problem Solving Academy | Endless Opportunities"
    />
    <meta
      property="og:description"
      content="Learn to solve problems. Ask deep questions. Build real solutions with AI."
    />
    <meta
      property="og:image"
      content="https://autonateai.com/assets/courses/course-endless-opportunities.png"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="AI Problem Solving Academy | Endless Opportunities"
    />
    <meta
      name="twitter:image"
      content="https://autonateai.com/assets/courses/course-endless-opportunities.png"
    />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="../shared/css/course-detail.css" />
    <style>
      .spinner {
        display: inline-block;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        margin-right: 8px;
        vertical-align: middle;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* Partner branding */
      .partner-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: linear-gradient(135deg, #2e7d32, #4caf50);
        padding: 0.5rem 1rem;
        border-radius: var(--radius-full);
        font-size: 0.85rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .partner-badge img {
        height: 24px;
        width: auto;
      }

      .course-hero.endless-opportunities {
        background: radial-gradient(
            ellipse at 30% 50%,
            rgba(46, 125, 50, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            ellipse at 70% 30%,
            rgba(76, 175, 80, 0.2) 0%,
            transparent 50%
          ),
          var(--bg-primary);
      }

      .access-notice {
        background: linear-gradient(
          135deg,
          rgba(46, 125, 50, 0.15),
          rgba(76, 175, 80, 0.1)
        );
        border: 1px solid rgba(76, 175, 80, 0.3);
        border-radius: var(--radius-md);
        padding: 1rem 1.5rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .access-notice-icon {
        font-size: 1.5rem;
      }

      .access-notice-text {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      .access-notice-text strong {
        color: #4caf50;
      }

      .week-badge {
        background: #4caf50;
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: var(--radius-full);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .three-forces-preview .force-preview .icon {
        font-size: 2rem;
      }

      /* Override accent colors for this course */
      .course-hero.endless-opportunities .enrollment-card .enroll-btn {
        background: linear-gradient(135deg, #2e7d32, #4caf50);
      }

      .course-hero.endless-opportunities .enrollment-card .enroll-btn:hover {
        background: linear-gradient(135deg, #1b5e20, #388e3c);
      }
    </style>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <!-- Anime.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <!-- Shared Components -->
    <script src="../shared/js/navbar.js" defer></script>
  </head>
  <body>
    <!-- Hero Section -->
    <section class="course-hero endless-opportunities">
      <div class="hero-content">
        <nav class="hero-nav">
          <a href="../index.html" class="back-link"> ‚Üê Back to Courses </a>
          <div class="auth-buttons" id="auth-buttons">
            <a href="../auth/login.html" class="auth-btn login">Sign In</a>
            <a href="../auth/register.html" class="auth-btn register"
              >Get Started</a
            >
          </div>
        </nav>

        <div class="hero-main">
          <div class="hero-text">
            <div class="partner-badge">
              <span>üåü</span>
              <span>Endless Opportunities Partnership</span>
            </div>
            <span class="course-badge">4-Week Problem Solving Academy</span>
            <h1 class="course-title">AI Problem Solving Academy</h1>
            <p class="course-tagline">
              Learn to solve problems. Ask deep questions. Build real solutions.
              A 4-week program teaching middle and high school students how to
              use AI to understand and solve the problems around them.
            </p>

            <div class="course-meta-row">
              <span class="meta-item">
                <span class="icon">üìÖ</span> 4 weeks
              </span>
              <span class="meta-item">
                <span class="icon">üìñ</span> 8 hours live
              </span>
              <span class="meta-item">
                <span class="icon">üî®</span> 5+ projects
              </span>
              <span class="meta-item">
                <span class="icon">üß†</span> Portfolio
              </span>
            </div>

            <div class="three-forces-preview">
              <div class="force-preview">
                <div class="icon">‚ùì</div>
                <div class="name">Questions</div>
                <div class="desc">6 Levels Deep</div>
              </div>
              <div class="force-preview">
                <div class="icon">üìä</div>
                <div class="name">Data</div>
                <div class="desc">See Everything</div>
              </div>
              <div class="force-preview">
                <div class="icon">üõ†Ô∏è</div>
                <div class="name">Build</div>
                <div class="desc">Real Solutions</div>
              </div>
            </div>
          </div>

          <div class="enrollment-card">
            <div class="access-notice" id="access-notice" style="display: none">
              <span class="access-notice-icon">üîí</span>
              <div class="access-notice-text">
                This is a <strong>partner course</strong> for Endless
                Opportunities participants. Contact your program coordinator for
                access.
              </div>
            </div>

            <div class="enrollment-price">
              <div class="price-tag">Partner Course</div>
              <div class="price-note">For Endless Opportunities students</div>
            </div>

            <button class="enroll-btn" id="enroll-btn">Start Learning ‚Üí</button>

            <p
              style="
                text-align: center;
                font-size: 0.85rem;
                color: var(--text-muted);
              "
            >
              Building problem solvers in Greater Grand Rapids
            </p>

            <ul class="enrollment-features">
              <li><span class="check">‚úì</span> The 6 Levels Deep framework</li>
              <li><span class="check">‚úì</span> ChatGPT + Cursor AI mastery</li>
              <li><span class="check">‚úì</span> Build real websites & tools</li>
              <li><span class="check">‚úì</span> Data analysis skills</li>
              <li><span class="check">‚úì</span> Problem-solving portfolio</li>
              <li><span class="check">‚úì</span> Certificate on completion</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Course Content -->
    <div class="course-content">
      <!-- What You'll Learn -->
      <section class="content-section">
        <h2 class="section-title">What You'll Learn</h2>
        <div class="learn-grid">
          <div class="learn-item">
            <div class="icon">üéØ</div>
            <div>
              <h4>Problem Identification</h4>
              <p>Learn to see problems everywhere - from simple to complex</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">‚ùì</div>
            <div>
              <h4>The Art of Questions</h4>
              <p>
                Master the "6 Levels Deep" framework - keep asking why until you truly understand
              </p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">ü§ñ</div>
            <div>
              <h4>AI as Your Teacher</h4>
              <p>Use ChatGPT as an infinitely patient knowledge base that never gets tired of questions</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üìä</div>
            <div>
              <h4>Data Everywhere</h4>
              <p>See social media as a phone book of data - learn to collect, analyze, and find insights</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üõ†Ô∏è</div>
            <div>
              <h4>Build Real Things</h4>
              <p>Create websites, tools, games, and interactive experiences with Cursor AI</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üöÄ</div>
            <div>
              <h4>Solve Real Problems</h4>
              <p>Apply everything to solve actual problems in your life and community</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Curriculum -->
      <section class="content-section">
        <h2 class="section-title">4-Week Curriculum</h2>
        <div class="curriculum-list">
          <div class="chapter-item">
            <a
              href="../endless-opportunities/week0-intro/"
              class="chapter-link"
              style="text-decoration: none; color: inherit; display: block"
            >
              <div
                class="chapter-header"
                onclick="event.stopPropagation(); toggleChapter(this.parentElement.parentElement)"
              >
                <div class="chapter-number">0</div>
                <div class="chapter-info">
                  <div class="chapter-title">üéÆ The Game We Live In</div>
                  <div class="chapter-subtitle">Problems, AI, and Your Future</div>
                </div>
                <div class="chapter-meta">
                  <span class="week-badge">Intro</span>
                  <span>üìñ 30 mins</span>
                </div>
              </div>
            </a>
            <div class="chapter-content">
              <ul class="chapter-topics">
                <li>The world is full of problems waiting to be solved</li>
                <li>Hard problems = big rewards (and AI changes everything)</li>
                <li>Introduction to "6 Levels Deep" questioning</li>
                <li>AI as your infinitely patient teacher</li>
                <li>Your first ChatGPT conversation</li>
              </ul>
            </div>
          </div>

          <div class="chapter-item">
            <a
              href="../endless-opportunities/week1-questions/"
              class="chapter-link"
              style="text-decoration: none; color: inherit; display: block"
            >
              <div
                class="chapter-header"
                onclick="event.stopPropagation(); toggleChapter(this.parentElement.parentElement)"
              >
                <div class="chapter-number">1</div>
                <div class="chapter-info">
                  <div class="chapter-title">‚ùì The Art of Questions</div>
                  <div class="chapter-subtitle">
                    6 Levels Deep - Understanding Through Curiosity
                  </div>
                </div>
                <div class="chapter-meta">
                  <span class="week-badge">Week 1</span>
                  <span>üìñ 2 hours</span>
                </div>
              </div>
            </a>
            <div class="chapter-content">
              <ul class="chapter-topics">
                <li>Why questions are the key to everything</li>
                <li>The "6 Levels Deep" framework in practice</li>
                <li>Comprehension as a superpower</li>
                <li>Using ChatGPT to explore real topics</li>
                <li>Project: Deep-dive exploration on 2 topics</li>
              </ul>
            </div>
          </div>

          <div class="chapter-item">
            <a
              href="../endless-opportunities/week2-data/"
              class="chapter-link"
              style="text-decoration: none; color: inherit; display: block"
            >
              <div
                class="chapter-header"
                onclick="event.stopPropagation(); toggleChapter(this.parentElement.parentElement)"
              >
                <div class="chapter-number">2</div>
                <div class="chapter-info">
                  <div class="chapter-title">üìä Data is Everywhere</div>
                  <div class="chapter-subtitle">
                    Search, Collect, Analyze, Understand
                  </div>
                </div>
                <div class="chapter-meta">
                  <span class="week-badge">Week 2</span>
                  <span>üìñ 2 hours</span>
                </div>
              </div>
            </a>
            <div class="chapter-content">
              <ul class="chapter-topics">
                <li>Social media as a "phone book of data"</li>
                <li>Search algorithms - finding what you need</li>
                <li>Recommendation algorithms - understanding alignment</li>
                <li>Collecting and analyzing data</li>
                <li>Project: Data insight report</li>
              </ul>
            </div>
          </div>

          <div class="chapter-item">
            <a
              href="../endless-opportunities/week3-building/"
              class="chapter-link"
              style="text-decoration: none; color: inherit; display: block"
            >
              <div
                class="chapter-header"
                onclick="event.stopPropagation(); toggleChapter(this.parentElement.parentElement)"
              >
                <div class="chapter-number">3</div>
                <div class="chapter-info">
                  <div class="chapter-title">üõ†Ô∏è Building Real Things</div>
                  <div class="chapter-subtitle">
                    Websites, Tools, Games with Cursor AI
                  </div>
                </div>
                <div class="chapter-meta">
                  <span class="week-badge">Week 3</span>
                  <span>üìñ 2 hours</span>
                </div>
              </div>
            </a>
            <div class="chapter-content">
              <ul class="chapter-topics">
                <li>Introduction to Cursor AI - describe it, AI builds it</li>
                <li>Setup: GitHub, Cursor, your environment</li>
                <li>Building interactive websites and tools</li>
                <li>Games, questionnaires, data visualizations</li>
                <li>Project: 2-3 working tools you built</li>
              </ul>
            </div>
          </div>

          <div class="chapter-item">
            <a
              href="../endless-opportunities/week4-portfolio/"
              class="chapter-link"
              style="text-decoration: none; color: inherit; display: block"
            >
              <div
                class="chapter-header"
                onclick="event.stopPropagation(); toggleChapter(this.parentElement.parentElement)"
              >
                <div class="chapter-number">4</div>
                <div class="chapter-info">
                  <div class="chapter-title">üöÄ Problem Solver Portfolio</div>
                  <div class="chapter-subtitle">
                    Questions + Data + Build = Solutions
                  </div>
                </div>
                <div class="chapter-meta">
                  <span class="week-badge">Week 4</span>
                  <span>üìñ 2 hours</span>
                </div>
              </div>
            </a>
            <div class="chapter-content">
              <ul class="chapter-topics">
                <li>Putting it all together: the problem-solving process</li>
                <li>Identify a real problem to solve</li>
                <li>Apply 6 Levels Deep + gather data + build solution</li>
                <li>Present your work</li>
                <li>Your complete problem-solving portfolio</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- What You Can Build -->
      <section class="content-section">
        <h2 class="section-title">What You'll Build</h2>
        <div class="learn-grid">
          <div class="learn-item">
            <div class="icon">üåê</div>
            <div>
              <h4>Interactive Websites</h4>
              <p>Real websites that solve problems and engage users</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üéÆ</div>
            <div>
              <h4>Games & Quizzes</h4>
              <p>Interactive experiences that teach or entertain</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üìã</div>
            <div>
              <h4>Questionnaires & Tools</h4>
              <p>Useful tools that collect data or help people</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üìà</div>
            <div>
              <h4>Data Visualizations</h4>
              <p>Turn numbers and information into visual insights</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üìä</div>
            <div>
              <h4>Research Reports</h4>
              <p>Deep analysis on topics that matter to you</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üí°</div>
            <div>
              <h4>Solution Proposals</h4>
              <p>Real plans to solve real problems in your community</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Perfect For -->
      <section class="content-section">
        <h2 class="section-title">This Course Is Perfect For</h2>
        <div class="learn-grid">
          <div class="learn-item">
            <div class="icon">üéí</div>
            <div>
              <h4>Middle & High School Students</h4>
              <p>6th-12th grade, no prior experience needed</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üß†</div>
            <div>
              <h4>Curious Minds</h4>
              <p>Students who ask "why?" and want to understand how things work</p>
            </div>
          </div>
          <div class="learn-item">
            <div class="icon">üå±</div>
            <div>
              <h4>Future Problem Solvers</h4>
              <p>Anyone who wants to make a difference in their community</p>
            </div>
          </div>
        </div>
      </section>

      <!-- About Endless Opportunities -->
      <section
        class="content-section"
        style="
          background: var(--bg-secondary);
          padding: 3rem;
          border-radius: var(--radius-lg);
          margin-top: 2rem;
        "
      >
        <h2 class="section-title">About Endless Opportunities</h2>
        <p
          style="
            color: var(--text-secondary);
            line-height: 1.8;
            max-width: 700px;
            margin: 0 auto 1.5rem;
          "
        >
          Founded in 2011, <strong>Endless Opportunities</strong> has helped
          hundreds of first-generation college students in Greater Grand Rapids
          build competency, contribute to their community, and increase their
          economic capabilities.
        </p>
        <p
          style="
            color: var(--text-secondary);
            line-height: 1.8;
            max-width: 700px;
            margin: 0 auto;
          "
        >
          This AI Problem Solving Academy extends that mission by teaching young
          people how to think deeply, ask powerful questions, and use AI tools
          to build real solutions to problems that matter.
        </p>
      </section>

      <!-- FAQ -->
      <section class="content-section">
        <h2 class="section-title">Frequently Asked Questions</h2>
        <div class="faq-list">
          <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
              <span>Who can access this course?</span>
              <span class="toggle">+</span>
            </div>
            <div class="faq-answer">
              This course is exclusively for students enrolled in the Endless
              Opportunities program. If you're part of the program, your
              coordinator will provide access credentials. If you're interested
              in joining, contact Endless Opportunities directly.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
              <span>Do I need any prior experience?</span>
              <span class="toggle">+</span>
            </div>
            <div class="faq-answer">
              No prior coding or AI experience needed! All you need is curiosity
              and a willingness to ask questions. We'll teach you everything
              from scratch. A laptop with internet access is required.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
              <span>What is "6 Levels Deep"?</span>
              <span class="toggle">+</span>
            </div>
            <div class="faq-answer">
              It's our framework for deep understanding. Instead of accepting
              surface-level answers, you keep asking "why?" at least 6 times to
              get to the root of any topic. Most people stop at 1-2 levels. Going
              6 levels deep puts you ahead of 99% of people in understanding.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
              <span>What tools will I learn?</span>
              <span class="toggle">+</span>
            </div>
            <div class="faq-answer">
              You'll master ChatGPT for questioning and exploration, and Cursor AI
              for building real websites and tools. You'll also learn to use GitHub
              for sharing your work. All tools have free tiers to get started.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
              <span>Will I actually build real things?</span>
              <span class="toggle">+</span>
            </div>
            <div class="faq-answer">
              Yes! By the end of the course, you'll have built multiple interactive
              websites and tools that actually work. You don't need to know how to
              code - you describe what you want, and Cursor AI helps you build it.
              Your projects will be live on the internet for anyone to see.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question" onclick="toggleFaq(this)">
              <span>How is the course delivered?</span>
              <span class="toggle">+</span>
            </div>
            <div class="faq-answer">
              The program includes weekly 2-hour live sessions plus self-paced
              online content, hands-on projects, and community support. You'll
              work on real problems and build real solutions throughout the program.
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- CTA Section -->
    <section
      class="cta-section"
      style="background: linear-gradient(135deg, #1b5e20, #2e7d32)"
    >
      <h2 class="cta-title">Ready to Become a Problem Solver?</h2>
      <p class="cta-subtitle">
        Join Endless Opportunities students who are learning to ask deep questions,
        understand data, and build real solutions with AI.
      </p>
      <a
        href="#"
        class="cta-btn"
        id="cta-enroll-btn"
        style="background: white; color: #1b5e20"
      >
        Start Learning ‚Üí
      </a>
    </section>

    <!-- Footer -->
    <footer class="course-footer">
      <p>
        A partnership between
        <a href="https://endlessopportunities.org" target="_blank"
          >Endless Opportunities</a
        >
        &
        <a href="https://github.com/nathanbaker-ao" target="_blank"
          >AutoNateAI</a
        >
      </p>
    </footer>

    <!-- Scripts -->
    <script src="../shared/js/firebase-config.js"></script>
    <script src="../shared/js/auth.js"></script>
    <script src="../shared/js/data-service.js"></script>
    <script src="../shared/js/rbac.js"></script>

    <script>
      const COURSE_ID = "endless-opportunities";
      const COURSE_DATA = {
        name: "AI Problem Solving Academy",
        icon: "üß†",
        subtitle: "Endless Opportunities Partnership",
      };

      // Toggle chapter accordion
      function toggleChapter(header) {
        const item = header.closest(".chapter-item");
        item.classList.toggle("open");
      }

      // Toggle FAQ accordion
      function toggleFaq(question) {
        const item = question.closest(".faq-item");
        item.classList.toggle("open");
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", async () => {
        if (!window.FirebaseApp.init()) {
          console.error("Firebase initialization failed");
          return;
        }

        window.AuthService.init();

        // Check auth state
        window.AuthService.onAuthStateChanged(async (user) => {
          updateAuthUI(user);

          if (user) {
            await checkAccess();
            await checkEnrollmentStatus();
          } else {
            // Show access notice for logged out users
            document.getElementById("access-notice").style.display = "flex";
          }
        });

        // Enroll button handlers
        document
          .getElementById("enroll-btn")
          .addEventListener("click", handleEnroll);
        document
          .getElementById("cta-enroll-btn")
          .addEventListener("click", handleEnroll);

        // Animate elements
        animateOnScroll();
      });

      // Update auth UI
      function updateAuthUI(user) {
        const authButtons = document.getElementById("auth-buttons");

        if (user) {
          authButtons.innerHTML = `
          <a href="../dashboard/index.html" class="auth-btn register">My Dashboard</a>
        `;
        }
      }

      // Check if user has access to this course
      async function checkAccess() {
        if (!window.RBACService) return;

        const canAccess = await window.RBACService.canAccessCourse(COURSE_ID);
        const accessNotice = document.getElementById("access-notice");
        const enrollBtn = document.getElementById("enroll-btn");
        const ctaBtn = document.getElementById("cta-enroll-btn");

        if (!canAccess) {
          accessNotice.style.display = "flex";
          enrollBtn.textContent = "Request Access";
          enrollBtn.onclick = () => {
            window.location.href =
              "../enterprise.html?request=endless-opportunities";
          };
          ctaBtn.textContent = "Request Access";
          ctaBtn.onclick = () => {
            window.location.href =
              "../enterprise.html?request=endless-opportunities";
          };
        } else {
          accessNotice.style.display = "none";
        }
      }

      // Check enrollment status
      async function checkEnrollmentStatus() {
        try {
          const progress = await window.DataService.getCourseProgress(
            COURSE_ID
          );

          if (progress) {
            const enrollBtn = document.getElementById("enroll-btn");
            const ctaBtn = document.getElementById("cta-enroll-btn");

            enrollBtn.textContent = "Continue Learning ‚Üí";
            ctaBtn.textContent = "Continue Learning ‚Üí";
          }
        } catch (error) {
          console.error("Error checking enrollment:", error);
        }
      }

      // Handle enrollment
      async function handleEnroll(e) {
        e.preventDefault();

        // Wait for auth to be ready
        const user = await window.AuthService.waitForAuthState();

        if (!user) {
          window.AuthService.setRedirectUrl(window.location.href);
          window.location.href = "../auth/register.html";
          return;
        }

        // Check access first
        if (window.RBACService) {
          const canAccess = await window.RBACService.canAccessCourse(COURSE_ID);
          if (!canAccess) {
            window.location.href =
              "../enterprise.html?request=endless-opportunities";
            return;
          }
        }

        const btn = e.target;
        btn.disabled = true;
        btn.innerHTML = '<span class="spinner"></span> Enrolling...';

        try {
          const progress = await window.DataService.getCourseProgress(
            COURSE_ID
          );

          if (progress) {
            // Already enrolled, go to intro
            window.location.href = `../${COURSE_ID}/week0-intro/`;
            return;
          }

          // Enroll user
          const result = await window.DataService.enrollInCourse(
            COURSE_ID,
            COURSE_DATA
          );

          if (result.success) {
            window.location.href = `../${COURSE_ID}/week0-intro/`;
          } else {
            throw new Error(result.error || "Enrollment failed");
          }
        } catch (error) {
          console.error("Enrollment error:", error);
          btn.disabled = false;
          btn.textContent = "Start Learning ‚Üí";
          alert("Failed to enroll: " + error.message);
        }
      }

      // Animate elements on scroll
      function animateOnScroll() {
        anime({
          targets: ".hero-text > *",
          opacity: [0, 1],
          translateY: [30, 0],
          delay: anime.stagger(100, { start: 200 }),
          easing: "easeOutCubic",
          duration: 800,
        });

        anime({
          targets: ".enrollment-card",
          opacity: [0, 1],
          translateX: [30, 0],
          delay: 500,
          easing: "easeOutCubic",
          duration: 800,
        });

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                anime({
                  targets: entry.target.querySelectorAll(
                    ".learn-item, .chapter-item, .faq-item"
                  ),
                  opacity: [0, 1],
                  translateY: [20, 0],
                  delay: anime.stagger(80),
                  easing: "easeOutCubic",
                  duration: 600,
                });
                observer.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.1 }
        );

        document.querySelectorAll(".content-section").forEach((section) => {
          section.style.opacity = 0;
          section
            .querySelectorAll(".learn-item, .chapter-item, .faq-item")
            .forEach((item) => {
              item.style.opacity = 0;
            });
          section.style.opacity = 1;
          observer.observe(section);
        });
      }
    </script>
  </body>
</html>
